(this["webpackJsonpxstate-viz-site"]=this["webpackJsonpxstate-viz-site"]||[]).push([[0],{114:function(n,e,t){n.exports=t(443)},119:function(n,e,t){},120:function(n,e,t){},443:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=t(102),i=t.n(a),l=(t(119),t(120),t(4)),c=t(38),s=t(27),d=t(5),u=t(12),p=t(18);function f(n){var e;return(e=[]).concat.apply(e,n)}var m=/^xstate\.after\((.+)\)#/;function g(n){var e=n.cond?"["+n.cond.toString().replace(/\n/g,"")+"]":"";return n.source.id+":"+n.event+e+"->"+n.target.id}function h(n){if(!n)return!0;var e=n.getBoundingClientRect();return 0===e.width&&0===e.height}function v(n,e){var t=e.getBoundingClientRect();return{top:n.top-t.top,right:n.right-t.left,bottom:n.bottom-t.top,left:n.left-t.left,width:n.width,height:n.height}}function y(n){return{x:n.left+n.width/2,y:n.top+n.height/2}}function b(n){return 0===n.indexOf("xstate.")||0===n.indexOf("done.")||""===n}var w=function(){return(w=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},x=new(function(){function n(){var n,e=this;(this.elements=new Map,"undefined"!==typeof window)&&window.addEventListener("resize",(function(){n&&cancelAnimationFrame(n),n=requestAnimationFrame((function(){e.updateAll()}))}))}return n.prototype.updateAll=function(){var n=this;Array.from(this.elements.keys()).forEach((function(e){n.update(e,n.elements.get(e).element)}))},n.prototype.update=function(n,e){var t=this;this.elements.get(n)||this.elements.set(n,{listeners:new Set,element:e||void 0,rect:e?e.getBoundingClientRect():void 0,hidden:h(e)});var r=w(w({},this.elements.get(n)),{element:e||void 0,rect:e?e.getBoundingClientRect():void 0,hidden:h(e)});if(this.notify(r),e){var o=e.querySelectorAll("[data-id]");Array.from(o).forEach((function(n){var e=n.getAttribute("data-id");t.update(e,n)}))}},n.prototype.listen=function(n,e){this.elements.get(n)||this.elements.set(n,{listeners:new Set,element:void 0,rect:void 0,hidden:!0});var t=this.elements.get(n);t.listeners.add(e),this.notify(t)},n.prototype.get=function(n){if(this.elements.get(n))return this.elements.get(n)},n.prototype.notify=function(n){n.listeners.forEach((function(e){e(n)}))},n}()),k=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();var E,O,j,z,S,P,C,A,N,T,M,I,D,L,R,U,_,F,G,X,J,H=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.state={eventElement:null,sourceElement:null,targetElement:null,sourceData:x.get(e.props.edge.source.id),targetData:x.get(e.props.edge.target.id),eventData:x.get(g(e.props.edge))},e.ref=o.a.createRef(),e}return k(e,n),e.prototype.componentDidMount=function(){var n=this,e=this.props.edge,t=g(e);x.listen(t,(function(e){n.setState({eventData:e})})),x.listen(e.source.id,(function(e){n.setState({sourceData:e})})),x.listen(e.target.id,(function(t){for(var r=e.target,o=t;h(o.element)&&r.parent&&(r=r.parent,o=x.get(r.id)););n.setState({targetData:o||void 0})}))},e.prototype.render=function(){var n=this.props.edge,e=this.state,t=e.sourceData,r=e.eventData,a=e.targetData;if(!t||t.hidden||!r||r.hidden||!a||a.hidden)return null;var i=this.props.svg,l=v(this.state.sourceData.rect,i),c=v(this.state.eventData.rect,i),s=v(this.state.eventData.element.parentElement.getBoundingClientRect(),i),d=v(this.state.targetData.rect,i),u=y(c),p=(y(d),n.source===n.target),f=[];if(n.transition.internal)f.push((function(){return{x:c.left,y:u.y}})),f.push((function(n){return{x:l.right,y:n.y}})),p?f.push((function(n){return n.y>l.bottom?{x:d.right-10,y:l.bottom}:{x:d.right,y:n.y}})):f.push((function(n){return{x:d.right,y:n.y,color:"green"}}),(function(){return{x:d.right-10,y:d.top-10}}),(function(n){return{x:n.x,y:d.top}}));else if(p)f.push((function(){return{x:l.right,y:Math.min(u.y,l.bottom)}}),(function(n){return{x:c.left,y:u.y}}),(function(n){return{x:c.right,y:u.y}}),(function(n){return{x:c.right+10,y:c.bottom}}),(function(n){return{x:c.right+20,y:u.y}}),(function(n){return{x:c.right+10,y:c.top}}),(function(n){return{x:c.right,y:u.y}}));else{f.push((function(){return{x:l.right,y:Math.min(u.y,l.bottom)}}),(function(){return{x:c.left,y:u.y}}),(function(){return{x:c.left,y:u.y}}),(function(){return{x:c.right,y:u.y}}));var m={x:c.right+10,y:u.y},g=void 0,h=m.x<d.right&&m.x>d.left?m.x:Math.abs(c.right-d.left)<Math.abs(c.right-d.right)?d.left:d.right,b=h-m.x,w={x:h,y:b<0?d.top:m.y<d.bottom&&m.y>d.top?m.y:Math.abs(s.bottom-d.top)<Math.abs(s.bottom-d.bottom)?d.top:d.bottom},x=w.y-m.y;w.y===d.top?(w.y-=5,g="top",w.x===d.right?w.x-=10:w.x===d.left&&(w.x+=10)):w.y===d.bottom?(w.y+=5,g="bottom",w.x===d.right?w.x-=10:w.x===d.left&&(w.x+=10)):w.x===d.right?(w.y=d.top,g="top"):(w.x-=5,g="left");var k=Math.sign(b),E=Math.sign(x);f.push((function(){return m})),-1===k&&(-1===E?f.push((function(n){return{x:n.x,y:Math.min(l.top-10,d.top-10)}})):l.bottom>m.y+10?(f.push((function(n){return{x:n.x,y:Math.min(l.bottom+10,w.y-10)}})),f.push((function(n){return{x:n.x+10*k,y:n.y}}))):f.push((function(n){return{x:n.x,y:Math.min(s.bottom+10,w.y-10)}}))),"top"===g?f.push((function(){return{x:w.x,y:w.y-10}})):"bottom"===g&&f.push((function(){return{x:w.x,y:w.y+10}})),f.push((function(){return w}),(function(){return w}))}var O=f.reduce((function(n,e,t){return n.push(e(n[t-1]||n[0])),n}),[]),j=O.slice(),z=O.reduce((function(n,e,t){if(0===t)return"M "+e.x+","+e.y;if(t===O.length-1)return n;var r=O[t-1],o=O[t+1],a=e.x-r.x,i=e.y-r.y,l=o.x-e.x,c=o.y-e.y,s={x:r.x+a/2,y:r.y+i/2},d={x:e.x+l/2,y:e.y+c/2};return j.push(s,d),n+"L "+s.x+","+s.y+" Q "+e.x+","+e.y+" "+d.x+","+d.y+" "}),""),S=this.props.preview;return o.a.createElement("g",null,o.a.createElement("path",{d:z,stroke:S?"var(--color-edge-active)":"var(--color-edge)",strokeWidth:2,fill:"none",markerEnd:S?"url(#marker-preview)":"url(#marker)",ref:this.ref}),null)},e}(r.Component),Y=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),V=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.state={sourceElement:void 0},e}return Y(e,n),e.prototype.componentDidMount=function(){var n=this,e=this.props.source.id;x.listen(e,(function(e){n.setState({sourceElement:e.element})}))},e.prototype.render=function(){var n=this.props,e=n.svgRef,t=n.preview;if(!this.state.sourceElement)return null;var r=v(this.state.sourceElement.getBoundingClientRect(),e),a=r.top,i=r.left,l=t?"var(--color-edge-active)":"var(--color-edge)";return o.a.createElement("g",null,o.a.createElement("circle",{r:"4",cx:i-10,cy:a,fill:l}),o.a.createElement("path",{d:"M "+(i-10)+","+a+" Q "+(i-10)+","+(a+10)+" "+(i-1)+","+(a+10)+" L "+i+","+(a+10),stroke:l,strokeWidth:"2",fill:"none",markerEnd:t?"url(#marker-preview)":"url(#marker)"}))},e}(o.a.Component),B=function(n){var e=n.event,t=e.match(m);if(t){var r=Number.isFinite(+t[1]);return o.a.createElement("span",null,o.a.createElement("em",null,"after")," ",t[1],r?"ms":"")}return(t=e.match(/^done\.state/))?o.a.createElement("span",null,o.a.createElement("em",null,"done")):(t=e.match(/^done\.invoke\.(.+)/))?o.a.createElement("span",null,o.a.createElement("em",null,"done")," (",t[1],")"):(t=e.match(/^error\.platform\.(.+)/))?o.a.createElement("span",null,o.a.createElement("em",null,"error")," (",t[1],")"):o.a.createElement("span",null,e)},W=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},q=l.a.button(E||(E=W(["\n  appearance: none;\n  background: transparent;\n  color: white;\n  height: 2rem;\n  border-radius: 0.25rem;\n  border: none;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease-in-out;\n  flex-shrink: 0;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n\n  &:hover {\n    background: white;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &[data-variant='primary'] {\n    background: white;\n    color: #111;\n    border-radius: 2px;\n    border: none;\n  }\n\n  &[data-variant='secondary'] {\n    background: #656565;\n    border-radius: 2px;\n    border: none;\n  }\n\n  &[data-variant='link'] {\n    background: transparent;\n    color: var(--color-link);\n    letter-spacing: 0;\n    height: auto;\n    padding: 0;\n    margin-left: 0.5rem;\n  }\n\n  &[data-size='full'] {\n    width: 100%;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"],["\n  appearance: none;\n  background: transparent;\n  color: white;\n  height: 2rem;\n  border-radius: 0.25rem;\n  border: none;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease-in-out;\n  flex-shrink: 0;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n\n  &:hover {\n    background: white;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &[data-variant='primary'] {\n    background: white;\n    color: #111;\n    border-radius: 2px;\n    border: none;\n  }\n\n  &[data-variant='secondary'] {\n    background: #656565;\n    border-radius: 2px;\n    border: none;\n  }\n\n  &[data-variant='link'] {\n    background: transparent;\n    color: var(--color-link);\n    letter-spacing: 0;\n    height: auto;\n    padding: 0;\n    margin-left: 0.5rem;\n  }\n\n  &[data-size='full'] {\n    width: 100%;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Q=t(13),$=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},Z=l.a.aside(O||(O=$(["\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  background: black;\n  color: white;\n  border-radius: var(--radius);\n  pointer-events: none;\n  opacity: 0;\n"],["\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  background: black;\n  color: white;\n  border-radius: var(--radius);\n  pointer-events: none;\n  opacity: 0;\n"]))),K=function(n){var e=n.children;return o.a.createElement(Z,null,e)},nn=t(447),en=t(446),tn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},rn=function(){return(rn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},on=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]])}return t},an=function(n){var e=n.children;return o.a.createElement(nn.a,{language:"ts",style:en.a,customStyle:{margin:0}},e)},ln=l.a.li(j||(j=tn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: baseline;\n  max-width: 30ch;\n  padding: 0 0.25rem;\n  line-height: 1rem;\n\n  &:hover > "," {\n    opacity: 1;\n  }\n\n  &:before {\n    font-weight: bold;\n    color: var(--color-gray);\n    margin-right: 0.25rem;\n    font-size: 75%;\n    content: attr(data-action-type) ' /';\n    white-space: nowrap;\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: baseline;\n  max-width: 30ch;\n  padding: 0 0.25rem;\n  line-height: 1rem;\n\n  &:hover > "," {\n    opacity: 1;\n  }\n\n  &:before {\n    font-weight: bold;\n    color: var(--color-gray);\n    margin-right: 0.25rem;\n    font-size: 75%;\n    content: attr(data-action-type) ' /';\n    white-space: nowrap;\n  }\n"])),Z),cn=l.a.span(z||(z=tn(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"],["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]))),sn=function(n){var e=n.action,t=on(n,["action"]);switch(e.type){case Q.actionTypes.assign:return"function"===typeof e.assignment?o.a.createElement(ln,rn({},t,{title:"assign"}),o.a.createElement("strong",null,"assign")):o.a.createElement(o.a.Fragment,null,Object.keys(e.assignment).map((function(n){return o.a.createElement(ln,rn({key:n,title:"assign "+n},t),o.a.createElement(K,null,o.a.createElement(an,null,e.assignment[n].toString())),o.a.createElement(cn,null,o.a.createElement("strong",null,"assign")," ",n))})));case Q.actionTypes.invoke:return o.a.createElement(ln,rn({},t,{title:"invoke "+e.id}),o.a.createElement(cn,null,e.id));case Q.actionTypes.send:var r=e;return r.event.type&&0===r.event.type.indexOf("xstate.after")?null:o.a.createElement(ln,rn({},t,{title:"send "+r.event.type+' to "'+JSON.stringify(r.to)+'"'}),o.a.createElement(cn,null,o.a.createElement("em",null,"send")," ",r.event.type," ",r.to?"to "+JSON.stringify(r.to):""));case Q.actionTypes.log:return o.a.createElement(ln,rn({},t,{title:"log"}),o.a.createElement(cn,null,o.a.createElement("em",null,"log")));default:return 0===e.type.indexOf("xstate.")&&"xstate.invoke"!==e.type?null:o.a.createElement(ln,rn({},t,{title:e.type}),o.a.createElement(cn,null,e.type))}},dn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},un=l.a.div(S||(S=dn(["\n  padding: 0 0.5rem;\n"],["\n  padding: 0 0.5rem;\n"]))),pn=function(n){var e=n.guard,t=n.state,r=e.predicate&&"function"===typeof e.predicate?e.predicate(t.context,t.event,{cond:e}):void 0;return o.a.createElement(un,{style:{color:void 0===r?"var(--color-gray)":r?"var(--color-success)":"var(--color-failure)"}},"[","xstate.guard"===e.type?e.name:e.type,"]")},fn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},mn=l.a.div(P||(P=fn(["\n  padding: 1rem;\n  border-top: 1px solid var(--color-border);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  min-height: 1rem;\n"],["\n  padding: 1rem;\n  border-top: 1px solid var(--color-border);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  min-height: 1rem;\n"]))),gn=l.a.button(C||(C=fn(["\n  appearance: none;\n  display: inline-flex;\n  height: 1rem;\n  width: 1rem;\n  justify-content: center;\n  align-items: center;\n  background: transparent;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n\n  &:not(:hover) {\n    opacity: 0.5;\n  }\n\n  &:before {\n    --dot-size: 3px;\n    content: '';\n    display: block;\n    height: var(--dot-size);\n    width: var(--dot-size);\n    border-radius: 50%;\n    background: var(--toggle-color, gray);\n    flex-shrink: 0;\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\n  }\n\n  &:focus {\n    outline: none;\n  }\n"],["\n  appearance: none;\n  display: inline-flex;\n  height: 1rem;\n  width: 1rem;\n  justify-content: center;\n  align-items: center;\n  background: transparent;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n\n  &:not(:hover) {\n    opacity: 0.5;\n  }\n\n  &:before {\n    --dot-size: 3px;\n    content: '';\n    display: block;\n    height: var(--dot-size);\n    width: var(--dot-size);\n    border-radius: 50%;\n    background: var(--toggle-color, gray);\n    flex-shrink: 0;\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\n  }\n\n  &:focus {\n    outline: none;\n  }\n"]))),hn=l.a.div(A||(A=fn(["\n  background: var(--color-border);\n  color: inherit;\n  font-weight: bold;\n"],["\n  background: var(--color-border);\n  color: inherit;\n  font-weight: bold;\n"]))),vn=l.a.header(N||(N=fn(["\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  white-space: nowrap;\n  // position: sticky;\n  // top: calc(var(--depth, 0) * 1rem);\n  // background: rgba(255, 255, 255, 0.5);\n\n  > * {\n    padding: 0.25rem;\n  }\n\n  &:before {\n    display: none;\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background: var(--color-app-background);\n  }\n\n  &[data-type-symbol='history' i] {\n    --symbol-color: orange;\n  }\n\n  &[data-type-symbol] {\n    padding-right: 5em;\n\n    &:after {\n      content: attr(data-type-symbol);\n      position: absolute;\n      top: 0;\n      right: 0;\n      border-bottom-left-radius: 0.25rem;\n      background: var(--symbol-color, gray);\n      color: white;\n      padding: 0.25rem 0.5rem;\n      font-weight: bold;\n      font-size: 0.75em;\n    }\n  }\n"],["\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  white-space: nowrap;\n  // position: sticky;\n  // top: calc(var(--depth, 0) * 1rem);\n  // background: rgba(255, 255, 255, 0.5);\n\n  > * {\n    padding: 0.25rem;\n  }\n\n  &:before {\n    display: none;\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background: var(--color-app-background);\n  }\n\n  &[data-type-symbol='history' i] {\n    --symbol-color: orange;\n  }\n\n  &[data-type-symbol] {\n    padding-right: 5em;\n\n    &:after {\n      content: attr(data-type-symbol);\n      position: absolute;\n      top: 0;\n      right: 0;\n      border-bottom-left-radius: 0.25rem;\n      background: var(--symbol-color, gray);\n      color: white;\n      padding: 0.25rem 0.5rem;\n      font-weight: bold;\n      font-size: 0.75em;\n    }\n  }\n"]))),yn=l.a.div(T||(T=fn(["\n  --color-shadow: rgba(0, 0, 0, 0.05);\n  --color-node-border: var(--color-border);\n  --state-event-gap: 0.5rem;\n  position: relative;\n  margin: 0.5rem;\n  flex-grow: 0;\n  flex-shrink: 1;\n  // background: rgba(255, 255, 255, 0.5);\n  color: #313131;\n  min-height: 1rem;\n  display: inline-grid;\n  grid-template-columns: min-content auto;\n  grid-column-gap: var(--state-event-gap);\n  border: none;\n\n  &[data-type~='machine'] {\n    display: grid;\n    border: none;\n    box-shadow: none;\n    width: 100%;\n    background: none;\n    margin: 2rem 0;\n    grid-template-columns: auto 1fr;\n\n    > "," {\n      left: 1rem;\n      font-size: 1rem;\n    }\n\n    > ul {\n      padding-right: 1.5rem;\n    }\n  }\n  &:not([data-type~='machine']) {\n    // opacity: 0.75;\n  }\n\n  &:not([data-open='true']) "," > * {\n    display: none;\n  }\n\n  "," {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  &[data-type~='machine'] > "," {\n    display: none;\n  }\n\n  &[data-active] {\n    --color-node-border: var(--color-primary);\n    --color-shadow: var(--color-primary-shadow);\n    opacity: 1;\n\n    > "," {\n      color: var(--color-primary);\n    }\n\n    > "," {\n      --toggle-color: var(--color-primary);\n    }\n  }\n\n  &[data-preview]:not([data-active]) {\n    --color-node-border: var(--color-primary-faded);\n  }\n\n  &[data-type~='parallel'] {\n    grid-template-columns: auto 1fr;\n  }\n\n  &[data-type~='final'] {\n    > div:first-child:after {\n      content: '';\n      position: absolute;\n      top: -5px;\n      left: -5px;\n      width: calc(100% + 10px);\n      height: calc(100% + 10px);\n      border: 2px solid var(--color-node-border);\n      pointer-events: none;\n      border-radius: 6px;\n      z-index: 1;\n    }\n  }\n\n  &:before {\n    content: attr(data-key);\n    color: transparent;\n    visibility: hidden;\n    height: 1px;\n    display: block;\n  }\n\n  &:hover {\n    z-index: 2;\n  }\n"],["\n  --color-shadow: rgba(0, 0, 0, 0.05);\n  --color-node-border: var(--color-border);\n  --state-event-gap: 0.5rem;\n  position: relative;\n  margin: 0.5rem;\n  flex-grow: 0;\n  flex-shrink: 1;\n  // background: rgba(255, 255, 255, 0.5);\n  color: #313131;\n  min-height: 1rem;\n  display: inline-grid;\n  grid-template-columns: min-content auto;\n  grid-column-gap: var(--state-event-gap);\n  border: none;\n\n  &[data-type~='machine'] {\n    display: grid;\n    border: none;\n    box-shadow: none;\n    width: 100%;\n    background: none;\n    margin: 2rem 0;\n    grid-template-columns: auto 1fr;\n\n    > "," {\n      left: 1rem;\n      font-size: 1rem;\n    }\n\n    > ul {\n      padding-right: 1.5rem;\n    }\n  }\n  &:not([data-type~='machine']) {\n    // opacity: 0.75;\n  }\n\n  &:not([data-open='true']) "," > * {\n    display: none;\n  }\n\n  "," {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  &[data-type~='machine'] > "," {\n    display: none;\n  }\n\n  &[data-active] {\n    --color-node-border: var(--color-primary);\n    --color-shadow: var(--color-primary-shadow);\n    opacity: 1;\n\n    > "," {\n      color: var(--color-primary);\n    }\n\n    > "," {\n      --toggle-color: var(--color-primary);\n    }\n  }\n\n  &[data-preview]:not([data-active]) {\n    --color-node-border: var(--color-primary-faded);\n  }\n\n  &[data-type~='parallel'] {\n    grid-template-columns: auto 1fr;\n  }\n\n  &[data-type~='final'] {\n    > div:first-child:after {\n      content: '';\n      position: absolute;\n      top: -5px;\n      left: -5px;\n      width: calc(100% + 10px);\n      height: calc(100% + 10px);\n      border: 2px solid var(--color-node-border);\n      pointer-events: none;\n      border-radius: 6px;\n      z-index: 1;\n    }\n  }\n\n  &:before {\n    content: attr(data-key);\n    color: transparent;\n    visibility: hidden;\n    height: 1px;\n    display: block;\n  }\n\n  &:hover {\n    z-index: 2;\n  }\n"])),vn,mn,gn,gn,vn,gn),bn=l.a.div(M||(M=fn(["\n  grid-column: 1 / 2;\n  align-self: self-start;\n  border-radius: 0.25rem;\n  border: 2px solid var(--color-node-border);\n  text-align: left;\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\n  color: #313131;\n  min-height: 1rem;\n  z-index: 1;\n  transition: border-color var(--duration) var(--easing);\n\n  &[data-type~='parallel'] > "," > "," > & {\n    border-style: dashed;\n  }\n"],["\n  grid-column: 1 / 2;\n  align-self: self-start;\n  border-radius: 0.25rem;\n  border: 2px solid var(--color-node-border);\n  text-align: left;\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\n  color: #313131;\n  min-height: 1rem;\n  z-index: 1;\n  transition: border-color var(--duration) var(--easing);\n\n  &[data-type~='parallel'] > "," > "," > & {\n    border-style: dashed;\n  }\n"])),mn,yn),wn=l.a.div(I||(I=fn(["\n  grid-column: 2 / 3;\n  padding: 0;\n  margin-right: 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n\n  &:empty {\n    display: none;\n  }\n"],["\n  grid-column: 2 / 3;\n  padding: 0;\n  margin-right: 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n\n  &:empty {\n    display: none;\n  }\n"]))),xn=l.a.ul(D||(D=fn(["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  margin-bottom: 0.5rem;\n  z-index: 1;\n\n  &:empty {\n    display: none;\n  }\n"],["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  margin-bottom: 0.5rem;\n  z-index: 1;\n\n  &:empty {\n    display: none;\n  }\n"]))),kn=l.a.div(L||(L=fn(["\n  --size: 0.5rem;\n  position: relative;\n  display: inline-block;\n  height: var(--size);\n  width: var(--size);\n  border-radius: 50%;\n  background-color: white;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: -0.25rem;\n    right: 0;\n    width: calc(100% + 0.5rem);\n    height: calc(100% + 0.5rem);\n    border-radius: inherit;\n    background-color: var(--color-event);\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0.25rem;\n    width: 100%;\n    height: 100%;\n    border-radius: inherit;\n    background-color: white;\n  }\n"],["\n  --size: 0.5rem;\n  position: relative;\n  display: inline-block;\n  height: var(--size);\n  width: var(--size);\n  border-radius: 50%;\n  background-color: white;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: -0.25rem;\n    right: 0;\n    width: calc(100% + 0.5rem);\n    height: calc(100% + 0.5rem);\n    border-radius: inherit;\n    background-color: var(--color-event);\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0.25rem;\n    width: 100%;\n    height: 100%;\n    border-radius: inherit;\n    background-color: white;\n  }\n"]))),En=l.a.label(R||(R=fn(["\n  white-space: nowrap;\n"],["\n  white-space: nowrap;\n"]))),On=l.a.button(U||(U=fn(["\n  --color-event: var(--color-primary);\n  padding: 0;\n  position: relative;\n  appearance: none;\n  border: 2px solid var(--color-event);\n  background: white;\n  color: white;\n  font-size: 0.75em;\n  font-weight: bold;\n  cursor: pointer;\n  border-radius: 2rem;\n  line-height: 1;\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  overflow: hidden;\n\n  > * {\n    padding: 0.15rem 0.35rem;\n  }\n\n  > label {\n    background-color: var(--color-event);\n    cursor: inherit;\n    text-align: left;\n    transition: background var(--duration) var(--easing);\n\n    &:empty {\n      display: none;\n    }\n\n    &:first-child:last-child {\n      width: 100%;\n    }\n  }\n\n  &:not(:disabled):not([data-builtin]):hover {\n    --color-event: var(--color-primary);\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    --color-event: var(--color-disabled);\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  // duration\n  &[data-delay] {\n    > * {\n      background: none;\n    }\n\n    &:not([disabled]):before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: var(--color-event);\n      animation: move-left calc(var(--delay) * 1ms) linear;\n      z-index: 0;\n      opacity: 0.5;\n    }\n  }\n\n  @keyframes move-left {\n    from {\n      transform: translateX(-100%);\n    }\n    to {\n      transform: none;\n    }\n  }\n\n  &[data-builtin] {\n    color: black;\n    font-style: italic;\n  }\n\n  &[data-transient] {\n    > "," {\n      order: -1;\n    }\n  }\n"],["\n  --color-event: var(--color-primary);\n  padding: 0;\n  position: relative;\n  appearance: none;\n  border: 2px solid var(--color-event);\n  background: white;\n  color: white;\n  font-size: 0.75em;\n  font-weight: bold;\n  cursor: pointer;\n  border-radius: 2rem;\n  line-height: 1;\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  overflow: hidden;\n\n  > * {\n    padding: 0.15rem 0.35rem;\n  }\n\n  > label {\n    background-color: var(--color-event);\n    cursor: inherit;\n    text-align: left;\n    transition: background var(--duration) var(--easing);\n\n    &:empty {\n      display: none;\n    }\n\n    &:first-child:last-child {\n      width: 100%;\n    }\n  }\n\n  &:not(:disabled):not([data-builtin]):hover {\n    --color-event: var(--color-primary);\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    --color-event: var(--color-disabled);\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  // duration\n  &[data-delay] {\n    > * {\n      background: none;\n    }\n\n    &:not([disabled]):before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: var(--color-event);\n      animation: move-left calc(var(--delay) * 1ms) linear;\n      z-index: 0;\n      opacity: 0.5;\n    }\n  }\n\n  @keyframes move-left {\n    from {\n      transform: translateX(-100%);\n    }\n    to {\n      transform: none;\n    }\n  }\n\n  &[data-builtin] {\n    color: black;\n    font-style: italic;\n  }\n\n  &[data-transient] {\n    > "," {\n      order: -1;\n    }\n  }\n"])),kn),jn=l.a.div(_||(_=fn(["\n  list-style: none;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n\n  &:not(:last-child) {\n    margin-bottom: 0.25rem;\n  }\n\n  &[data-disabled] > "," {\n    opacity: 0.7;\n  }\n\n  &[data-internal] {\n  }\n"],["\n  list-style: none;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n\n  &:not(:last-child) {\n    margin-bottom: 0.25rem;\n  }\n\n  &[data-disabled] > "," {\n    opacity: 0.7;\n  }\n\n  &[data-internal] {\n  }\n"])),xn),zn=(l.a.div(F||(F=fn(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  &:before {\n    content: '\u2192';\n    margin-right: 0.5ch;\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  &:before {\n    content: '\u2192';\n    margin-right: 0.5ch;\n  }\n"]))),l.a.div(G||(G=fn(["\n  position: absolute;\n  z-index: 0;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  animation: bg 1s both;\n  background: var(--color-primary);\n  will-change: opacity;\n\n  @keyframes bg {\n    from {\n      opacity: 0.5;\n    }\n    to {\n      opacity: 0;\n    }\n  }\n"],["\n  position: absolute;\n  z-index: 0;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  animation: bg 1s both;\n  background: var(--color-primary);\n  will-change: opacity;\n\n  @keyframes bg {\n    from {\n      opacity: 0.5;\n    }\n    to {\n      opacity: 0;\n    }\n  }\n"])))),Sn=function n(e){var t=localStorage.getItem(e.stateNode.id+"_toggled"),a=null===t||"1"===t,i=Object(r.useState)(a),l=i[0],c=i[1],s=Object(r.useRef)();Object(r.useEffect)((function(){x.update(e.stateNode.id,s.current)})),Object(r.useEffect)((function(){x.updateAll()}),[l]);var d=Object(r.useState)(0),u=d[0],f=d[1],h=e.stateNode,v=e.current,y=e.preview,b=e.onEvent,w=e.onPreEvent,k=e.onExitPreEvent,E=e.onReset,O=e.transitionCount;Object(r.useEffect)((function(){v.actions.some((function(n){return"xstate.cancel"===n.type&&n.sendId.indexOf(h.id)>0}))&&f(u+1)}),[v]);var j=!h.parent||v.matches(h.path.join("."))||void 0,z=y&&y.matches(h.path.join("."))||void 0,S=h.parent?h.type:"machine "+h.type;return o.a.createElement(yn,{key:h.id,"data-key":h.key,"data-type":S,"data-active":j&&h.parent,"data-preview":z&&h.parent,"data-open":l||void 0,ref:s},o.a.createElement(bn,{"data-id":h.id,"data-type":S},j&&("atomic"===S||"final"===S)&&o.a.createElement(zn,{key:O,style:{"--level":e.level}}),o.a.createElement(vn,{style:{"--depth":h.path.length}},"history"===S&&o.a.createElement(hn,null,"H"),o.a.createElement("strong",{title:"#"+h.id},h.key),0===h.path.length?o.a.createElement(q,{"data-variant":"link",onClick:E?function(){return E()}:void 0,title:"Reset machine to its initial state"},"Reset"):null),!!function(n){return n.onEntry.concat(n.onExit)}(h).length&&o.a.createElement(o.a.Fragment,null,o.a.createElement(xn,null,h.definition.onEntry.map((function(n){var e=n.type;return o.a.createElement(sn,{key:e,"data-action-type":"entry",action:n})}))),o.a.createElement(xn,null,h.definition.onExit.map((function(n){var e=n.type;return o.a.createElement(sn,{key:e,"data-action-type":"exit",action:n})})))),o.a.createElement(xn,{"data-title":"invoke"},h.invoke.map((function(n){return o.a.createElement(sn,{key:n.id,"data-action-type":"invoke",action:n},n.id)}))),Object.keys(h.states).length?o.a.createElement(mn,null,Object.keys(h.states||[]).map((function(t){var r=h.states[t];return o.a.createElement(n,{stateNode:r,level:e.level+1,current:v,preview:y,key:r.id,onEvent:b,onPreEvent:w,onExitPreEvent:k,toggledStates:e.toggledStates,onSelectServiceId:e.onSelectServiceId,transitionCount:e.transitionCount})}))):null,Object.keys(h.states).length>0?o.a.createElement(gn,{title:l?"Hide children":"Show children",onClick:function(n){n.stopPropagation();var e=!l;localStorage.setItem(h.id+"_toggled",e?"1":""),c(e)}}):null),o.a.createElement(wn,null,Object(p.getEdges)(h,{depth:0}).map((function(n){var e=n.event,t=0===e.indexOf("xstate."),r=n.transition.cond,a=!(!r||!r.predicate||r.predicate(v.context,v.event,{cond:r}))||!j||-1===v.nextEvents.indexOf(e),i=!!t&&function(n){var e=n.match(m);return!!e&&(Number.isFinite(+e[1])?+e[1]:e[1])}(e);if("string"===typeof i){var l=h.machine.options.delays[i];i="number"===typeof l?l:l(v.context,v.event)}var c=""===e;return o.a.createElement(jn,{style:{"--delay":i||0},"data-disabled":a||void 0,key:g(n),"data-internal":n.transition.internal||void 0},o.a.createElement(On,{onClick:function(){return t?void 0:b(e)},onMouseOver:function(){return w(e)},onMouseOut:function(){return k()},disabled:a,"data-delay":n.transition.delay,key:u,"data-builtin":t||void 0,"data-transient":c||void 0,"data-id":g(n),title:e},o.a.createElement(En,null,o.a.createElement(B,{event:e})),n.transition.cond&&o.a.createElement(pn,{guard:n.transition.cond,state:v})),!(!n.transition.actions.length&&!n.transition.cond)&&o.a.createElement(xn,null,n.transition.actions.map((function(n,e){return o.a.createElement(sn,{key:e,action:n,"data-action-type":"do"})}))))}))))},Pn=t(14),Cn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},An=function(){return(An=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},Nn=l.a.div(X||(X=Cn(["\n  position: relative;\n  max-height: inherit;\n  overflow-y: auto;\n"],["\n  position: relative;\n  max-height: inherit;\n  overflow-y: auto;\n"]))),Tn=function(n){var e,t=n.service,a=n.visible,i=n.onSelectService,l=n.onReset,c=Object(r.useState)(0),s=c[0],d=c[1],u=Object(Pn.useService)(t),m=u[0],h=u[1],v=o.a.useState({toggledStates:{},previewEvent:void 0,preview:void 0}),y=v[0],b=v[1],w=o.a.useRef(null);try{e=Object(p.getEdges)(t.machine)}catch(x){e=null,console.error(x)}return Object(r.useEffect)((function(){d(s+1)}),[m]),a&&e?o.a.createElement(Nn,null,o.a.createElement("svg",{width:"100%",height:"100%",style:{position:"absolute",top:0,left:0,"--color":"gray",overflow:"visible",pointerEvents:"none"},ref:w,key:JSON.stringify(y.toggledStates)},o.a.createElement("defs",null,o.a.createElement("marker",{id:"marker",markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",markerUnits:"strokeWidth",orient:"auto"},o.a.createElement("path",{d:"M0,0 L0,4 L4,2 z",fill:"var(--color-edge)"})),o.a.createElement("marker",{id:"marker-preview",markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",markerUnits:"strokeWidth",orient:"auto"},o.a.createElement("path",{d:"M0,0 L0,4 L4,2 z",fill:"var(--color-edge-active)"}))),e.map((function(n){if(w.current)return o.a.createElement(H,{key:g(n),svg:w.current,edge:n,preview:n.event===y.previewEvent&&m.matches(n.source.path.join("."))&&!!y.preview&&y.preview.matches(n.target.path.join("."))})})),function n(e){var t=Object.keys(e.states);return e.initialStateNodes.concat(f(t.map((function(t){var r=e.states[t];return"compound"===r.type||"parallel"===r.type?n(e.states[t]):[]}))))}(t.machine).map((function(n,e){if(w.current)return o.a.createElement(V,{key:n.id+"_"+e,source:n,svgRef:w.current,preview:m.matches(n.path.join("."))||!!y.preview&&y.preview.matches(n.path.join("."))})}))),o.a.createElement(Sn,{stateNode:t.machine,current:t.state,transitionCount:s,level:0,preview:y.preview,onReset:l,onEvent:function(n){h(n)},onPreEvent:function(n){y.preview||b(An(An({},y),{preview:t.nextState(n),previewEvent:n}))},onExitPreEvent:function(){b(An(An({},y),{preview:void 0,previewEvent:void 0}))},onSelectServiceId:function(n){var e=t.children.get(n);e&&i(e)},toggledStates:y.toggledStates})):null},Mn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},In=l.a.section(J||(J=Mn(["\n  display: grid;\n  grid-column-gap: 1rem;\n  grid-row-gap: 1rem;\n  padding: 0 1rem;\n\n  &[data-child] {\n    grid-template-columns: 1fr 1fr;\n  }\n"],["\n  display: grid;\n  grid-column-gap: 1rem;\n  grid-row-gap: 1rem;\n  padding: 0 1rem;\n\n  &[data-child] {\n    grid-template-columns: 1fr 1fr;\n  }\n"]))),Dn=function(n){var e=n.service,t=n.onReset;return o.a.createElement(In,null,o.a.createElement(Tn,{service:e,visible:!0,onSelectService:function(){},onReset:t}))},Ln=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},Rn=function(){return(Rn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},Un=l.a.div(Fn||(Fn=Ln(["\n  &:not(:last-child) {\n    margin-bottom: 1rem;\n  }\n\n  margin-top: 0.5rem;\n  width: 100%;\n  overflow: hidden;\n\n  > label {\n    text-transform: uppercase;\n    display: block;\n    margin-bottom: 0.5em;\n    font-weight: bold;\n    opacity: 0.5;\n  }\n\n  &[data-empty] {\n    opacity: 0.5;\n    > label {\n      margin-bottom: 0;\n    }\n  }\n"],["\n  &:not(:last-child) {\n    margin-bottom: 1rem;\n  }\n\n  margin-top: 0.5rem;\n  width: 100%;\n  overflow: hidden;\n\n  > label {\n    text-transform: uppercase;\n    display: block;\n    margin-bottom: 0.5em;\n    font-weight: bold;\n    opacity: 0.5;\n  }\n\n  &[data-empty] {\n    opacity: 0.5;\n    > label {\n      margin-bottom: 0;\n    }\n  }\n"])));function _n(n){var e=n.label,t=n.children,r=n.disabled,a=n.style;return o.a.createElement(Un,{style:Rn(Rn({},a),r?{opacity:.5}:void 0),"data-empty":!t||void 0},o.a.createElement("label",null,e),t)}var Fn,Gn,Xn,Jn,Hn,Yn,Vn,Bn,Wn,qn=l.a.details(Gn||(Gn=Ln(["\n  margin: 0;\n  padding: 0 1rem;\n\n  & & {\n    border-left: 2px solid #737373;\n  }\n\n  > summary {\n    font-weight: bold;\n    font-size: 1rem;\n  }\n"],["\n  margin: 0;\n  padding: 0 1rem;\n\n  & & {\n    border-left: 2px solid #737373;\n  }\n\n  > summary {\n    font-weight: bold;\n    font-size: 1rem;\n  }\n"]))),Qn=l.a.div(Xn||(Xn=Ln(["\n  display: grid;\n  grid-template-columns: auto 1fr;\n  grid-column-gap: 1ch;\n\n  & + & {\n    margin-top: 0.5rem;\n  }\n\n  pre {\n    margin: 0;\n  }\n"],["\n  display: grid;\n  grid-template-columns: auto 1fr;\n  grid-column-gap: 1ch;\n\n  & + & {\n    margin-top: 0.5rem;\n  }\n\n  pre {\n    margin: 0;\n  }\n"]))),$n=function n(e){var t=e.state,r=e.service,a={value:t.value,context:t.context};return o.a.createElement(qn,{key:r.id,open:!0},o.a.createElement("summary",null,r.id),o.a.createElement(_n,{label:"state"},o.a.createElement("pre",null,JSON.stringify(a,null,2))),o.a.createElement(_n,{label:"actions"},t.actions.map((function(n,e){return o.a.createElement(Qn,{key:e},Object.keys(n).map((function(e){return void 0===n[e]?null:o.a.createElement(o.a.Fragment,{key:e},o.a.createElement("strong",null,e,":"),o.a.createElement("pre",null,JSON.stringify(n[e],null,2)))})))}))),o.a.createElement(_n,{label:"Children"},Array.from(r.children.values()).map((function(e,t){return e.state?o.a.createElement(n,{state:e.state,service:e,key:t}):null}))))},Zn=t(33),Kn=t.n(Zn),ne=t(109),ee=t(53),te=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},re=Object(c.a)({id:"notifications",context:{notifications:[]},initial:"inactive",states:{inactive:{},active:{entry:Object(Q.log)(),on:{"NOTIFICATION.DISMISS":{actions:Object(d.b)({notifications:function(n,e){return Object(ee.a)(n.notifications,(function(n){n.splice(e.index,1)}))}})}}}},on:{"NOTIFICATIONS.QUEUE":{target:".active",actions:Object(d.b)({notifications:function(n,e){return Object(ee.a)(n.notifications,(function(n){n.unshift(e.data)}))}})}}}),oe=l.a.button(Jn||(Jn=te(["\n  appearance: none;\n  background: transparent;\n  color: white;\n"],["\n  appearance: none;\n  background: transparent;\n  color: white;\n"]))),ae=l.a.div(Hn||(Hn=te(["\n  padding: 1rem;\n  margin: 1rem;\n  border-radius: var(--radius);\n  border-top: 2px solid currentColor;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  background: white;\n  box-shadow: var(--shadow);\n  animation: notification-slideDown calc(var(--timeout, 4000) * 1ms) ease both;\n  will-change: transform;\n  transition: transform var(--duration);\n  cursor: default;\n\n  &[data-severity='success'] {\n    color: #40d38d;\n  }\n\n  &[data-severity='info'] {\n    color: #2f86eb;\n  }\n\n  &[data-severity='error'] {\n    color: #f16462;\n  }\n\n  > "," {\n    position: absolute;\n    right: 0;\n  }\n\n  @keyframes notification-slideDown {\n    from {\n      transform: translateY(-100%);\n    }\n    from,\n    50% {\n      pointer-events: auto;\n      opacity: 1;\n    }\n    20%,\n    to {\n      transform: translateY(calc(var(--index) * 100% + 0.5rem));\n    }\n    to {\n      opacity: 0;\n      pointer-events: none;\n    }\n  }\n"],["\n  padding: 1rem;\n  margin: 1rem;\n  border-radius: var(--radius);\n  border-top: 2px solid currentColor;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  background: white;\n  box-shadow: var(--shadow);\n  animation: notification-slideDown calc(var(--timeout, 4000) * 1ms) ease both;\n  will-change: transform;\n  transition: transform var(--duration);\n  cursor: default;\n\n  &[data-severity='success'] {\n    color: #40d38d;\n  }\n\n  &[data-severity='info'] {\n    color: #2f86eb;\n  }\n\n  &[data-severity='error'] {\n    color: #f16462;\n  }\n\n  > "," {\n    position: absolute;\n    right: 0;\n  }\n\n  @keyframes notification-slideDown {\n    from {\n      transform: translateY(-100%);\n    }\n    from,\n    50% {\n      pointer-events: auto;\n      opacity: 1;\n    }\n    20%,\n    to {\n      transform: translateY(calc(var(--index) * 100% + 0.5rem));\n    }\n    to {\n      opacity: 0;\n      pointer-events: none;\n    }\n  }\n"])),oe),ie=l.a.div(Yn||(Yn=te(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  z-index: 10;\n\n  > "," {\n    position: absolute;\n    pointer-events: auto;\n  }\n"],["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  z-index: 10;\n\n  > "," {\n    position: absolute;\n    pointer-events: auto;\n  }\n"])),ae),le=l.a.div(Vn||(Vn=te(["\n  color: #111;\n"],["\n  color: #111;\n"]))),ce=function(n){var e=n.notifier,t=Object(r.useState)(),a=t[0],i=t[1];if(Object(r.useEffect)((function(){e.subscribe((function(n){i(n)}))}),[]),!a)return null;var l=a.context.notifications;return o.a.createElement(ie,null,l.map((function(n,e){return o.a.createElement(ae,{key:l.length-e,"data-severity":n.severity,style:{"--timeout":5e3,"--index":e},onClick:function(){return Re.send({type:"NOTIFICATION.DISMISS",index:e})}},o.a.createElement("strong",null,n.message),n.description&&o.a.createElement(le,null,o.a.createElement("small",null,n.description," ","error"===n.severity?"(See console for more details)":"")))})))},se=t(35),de=t.n(se),ue="\n  // Available variables:\n  // - Machine\n  // - interpret\n  // - assign\n  // - send\n  // - sendParent\n  // - spawn\n  // - raise\n  // - actions\n  // - XState (all XState exports)\n  \n  const fetchMachine = Machine({\n    id: 'fetch',\n    initial: 'idle',\n    context: {\n      retries: 0\n    },\n    states: {\n      idle: {\n        on: {\n          FETCH: 'loading'\n        }\n      },\n      loading: {\n        on: {\n          RESOLVE: 'success',\n          REJECT: 'failure'\n        }\n      },\n      success: {\n        type: 'final'\n      },\n      failure: {\n        on: {\n          RETRY: {\n            target: 'loading',\n            actions: assign({\n              retries: (context, event) => context.retries + 1\n            })\n          }\n        }\n      }\n    }\n  });\n  ",pe=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},fe=l.a.div(Bn||(Bn=pe(["\n  padding: 1rem;\n  padding-top: 1.5rem;\n  margin: auto auto;\n  transform-style: preserve-3d;\n  perspective: 100px;\n  text-align: center;\n  font-size: 80%;\n  font-weight: bold;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n\n  &:before,\n  &:after {\n    content: '';\n    width: 1rem;\n    height: 1rem;\n    top: 0;\n    left: calc(50% - 0.5rem);\n    position: absolute;\n    border: 2px solid rgba(87, 176, 234, 1);\n    border-radius: 0.2rem;\n    animation: loader-box 1s infinite both;\n  }\n\n  &:after {\n    animation-delay: 0.5s;\n  }\n\n  @keyframes loader-box {\n    from {\n      transform: rotateY(40deg) translateX(150%);\n      opacity: 0;\n    }\n    50% {\n      transform: none;\n      opacity: 1;\n    }\n    to {\n      transform: rotateY(-40deg) translateX(-150%);\n      opacity: 0;\n    }\n  }\n"],["\n  padding: 1rem;\n  padding-top: 1.5rem;\n  margin: auto auto;\n  transform-style: preserve-3d;\n  perspective: 100px;\n  text-align: center;\n  font-size: 80%;\n  font-weight: bold;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n\n  &:before,\n  &:after {\n    content: '';\n    width: 1rem;\n    height: 1rem;\n    top: 0;\n    left: calc(50% - 0.5rem);\n    position: absolute;\n    border: 2px solid rgba(87, 176, 234, 1);\n    border-radius: 0.2rem;\n    animation: loader-box 1s infinite both;\n  }\n\n  &:after {\n    animation-delay: 0.5s;\n  }\n\n  @keyframes loader-box {\n    from {\n      transform: rotateY(40deg) translateX(150%);\n      opacity: 0;\n    }\n    50% {\n      transform: none;\n      opacity: 1;\n    }\n    to {\n      transform: rotateY(-40deg) translateX(-150%);\n      opacity: 0;\n    }\n  }\n"]))),me=function(n){var e=n.children,t=void 0===e?"Loading...":e;return o.a.createElement(fe,null,t)},ge=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},he=l.a.button(Wn||(Wn=ge(["\n  appearance: none;\n  background: white;\n  box-shadow: var(--shadow);\n  font-weight: bold;\n  text-transform: uppercase;\n  padding: 0.5rem 1rem;\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  color: black;\n  border: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n  z-index: 2;\n  margin-top: 1rem;\n  opacity: 0.7;\n  transition: all var(--duration) var(--easing);\n  transform: translateX(0.5rem);\n\n  &:focus,\n  &:hover {\n    outline: none;\n  }\n\n  &:hover {\n    opacity: 1;\n    transform: none;\n  }\n\n  [data-layout='viz'] & {\n    right: 100%;\n    color: black;\n  }\n"],["\n  appearance: none;\n  background: white;\n  box-shadow: var(--shadow);\n  font-weight: bold;\n  text-transform: uppercase;\n  padding: 0.5rem 1rem;\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  color: black;\n  border: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n  z-index: 2;\n  margin-top: 1rem;\n  opacity: 0.7;\n  transition: all var(--duration) var(--easing);\n  transform: translateX(0.5rem);\n\n  &:focus,\n  &:hover {\n    outline: none;\n  }\n\n  &:hover {\n    opacity: 1;\n    transform: none;\n  }\n\n  [data-layout='viz'] & {\n    right: 100%;\n    color: black;\n  }\n"]))),ve=function(n){var e=n.onClick,t=n.children;return o.a.createElement(he,{onClick:e},t)},ye=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},be=function(){return(be=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},we=function(n,e,t,r){return new(t||(t=Promise))((function(o,a){function i(n){try{c(r.next(n))}catch(e){a(e)}}function l(n){try{c(r.throw(n))}catch(e){a(e)}}function c(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(i,l)}c((r=r.apply(n,e||[])).next())}))},xe=function(n,e){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(n,i)}catch(l){a=[6,l],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ke=l.a.header(Se||(Se=ye(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: stretch;\n  grid-area: header;\n  padding: 0.5rem 1rem;\n  z-index: 1;\n  white-space: nowrap;\n"],["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: stretch;\n  grid-area: header;\n  padding: 0.5rem 1rem;\n  z-index: 1;\n  white-space: nowrap;\n"]))),Ee=l.a.main(Pe||(Pe=ye(["\n  --color-app-background: #fff;\n  --color-border: #c9c9c9;\n  --color-primary: rgba(87, 176, 234, 1);\n  --color-primary-faded: rgba(87, 176, 234, 0.5);\n  --color-primary-shadow: rgba(87, 176, 234, 0.1);\n  --color-link: rgba(87, 176, 234, 1);\n  --color-disabled: #b3b3b3;\n  --color-edge: #c9c9c9;\n  --color-edge-active: var(--color-primary);\n  --color-secondary: rgba(255, 152, 0, 1);\n  --color-secondary-light: rgba(255, 152, 0, 0.5);\n  --color-sidebar: #272722;\n  --color-gray: #555;\n  --color-failure: #ee7170;\n  --color-success: #31ae00;\n  --radius: 0.2rem;\n  --border-width: 2px;\n  --sidebar-width: 25rem;\n  --shadow: 0 0.5rem 1rem var(--shadow-color, rgba(0, 0, 0, 0.2));\n  --duration: 0.2s;\n  --easing: cubic-bezier(0.5, 0, 0.5, 1);\n\n  height: 100%;\n  display: grid;\n  grid-template-areas:\n    'header sidebar'\n    'content content';\n  grid-template-rows: 3rem auto;\n  grid-template-columns: auto var(--sidebar-width);\n  overflow: hidden;\n\n  > "," {\n    display: inline-block;\n    grid-row: 2;\n    grid-column: -1;\n  }\n\n  @media (max-width: 900px) {\n    grid-template-columns: 50% 50%;\n  }\n\n  &[data-embed] {\n    grid-template-rows: 0 auto;\n\n    > "," {\n      display: none;\n    }\n  }\n"],["\n  --color-app-background: #fff;\n  --color-border: #c9c9c9;\n  --color-primary: rgba(87, 176, 234, 1);\n  --color-primary-faded: rgba(87, 176, 234, 0.5);\n  --color-primary-shadow: rgba(87, 176, 234, 0.1);\n  --color-link: rgba(87, 176, 234, 1);\n  --color-disabled: #b3b3b3;\n  --color-edge: #c9c9c9;\n  --color-edge-active: var(--color-primary);\n  --color-secondary: rgba(255, 152, 0, 1);\n  --color-secondary-light: rgba(255, 152, 0, 0.5);\n  --color-sidebar: #272722;\n  --color-gray: #555;\n  --color-failure: #ee7170;\n  --color-success: #31ae00;\n  --radius: 0.2rem;\n  --border-width: 2px;\n  --sidebar-width: 25rem;\n  --shadow: 0 0.5rem 1rem var(--shadow-color, rgba(0, 0, 0, 0.2));\n  --duration: 0.2s;\n  --easing: cubic-bezier(0.5, 0, 0.5, 1);\n\n  height: 100%;\n  display: grid;\n  grid-template-areas:\n    'header sidebar'\n    'content content';\n  grid-template-rows: 3rem auto;\n  grid-template-columns: auto var(--sidebar-width);\n  overflow: hidden;\n\n  > "," {\n    display: inline-block;\n    grid-row: 2;\n    grid-column: -1;\n  }\n\n  @media (max-width: 900px) {\n    grid-template-columns: 50% 50%;\n  }\n\n  &[data-embed] {\n    grid-template-rows: 0 auto;\n\n    > "," {\n      display: none;\n    }\n  }\n"])),he,ke),Oe=(Object(l.a)((function(n){var e=n.className;return o.a.createElement("svg",{version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 279.8 98.5",xmlSpace:"preserve",className:e},o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("path",{d:"M55.8,10.4L55.8,10.4h19.5L55.6,44.6l0,0C49.6,33.9,49.7,20.9,55.8,10.4z",fill:"var(--fill, black)"}),o.a.createElement("polygon",{points:"75.4,88.1 30.5,10.4 11,10.4 33.4,49.3 11,88.1 30.5,88.1 43.2,66.2 55.8,88.1",fill:"var(--fill, black)"})),o.a.createElement("g",{className:"st0"},o.a.createElement("path",{d:"M89.1,59.8c3.2,2.7,6.9,4,11.3,4.1c5.2-0.1,7.8-2,7.9-5.7c0-3.1-1.7-4.9-5.2-5.5c-1.6-0.2-3.4-0.5-5.3-0.8\n\t\t\tc-3.4-0.6-6-1.9-7.8-3.9c-1.8-2.1-2.8-4.6-2.8-7.6c0-3.6,1.2-6.5,3.5-8.7c2.2-2.2,5.4-3.3,9.5-3.3c4.9,0.1,9.2,1.5,12.9,4.2\n\t\t\tl-3.4,5.1c-3-2-6.3-3.1-9.8-3.2c-1.9,0-3.4,0.5-4.6,1.4c-1.3,1-2,2.5-2,4.4c0,1.2,0.4,2.3,1.3,3.2c0.9,1,2.3,1.7,4.3,2\n\t\t\tc1.1,0.2,2.6,0.4,4.5,0.6c3.7,0.5,6.5,1.9,8.3,4.1c1.8,2.2,2.6,4.7,2.6,7.7C114,66,109.4,69.9,100.3,70c-5.9,0-10.9-1.9-15.2-5.6\n\t\t\tL89.1,59.8z",fill:"var(--fill, black)"}),o.a.createElement("path",{d:"M135.5,34.2h-10.9v-5.5h27.8v5.5h-10.9v35.5h-6V34.2z",fill:"var(--fill, black)"}),o.a.createElement("path",{d:"M180.9,60.5h-15.1l-3.1,9.2h-6.4l14.4-41h5l14.4,41H184L180.9,60.5z M179.2,55l-5.7-17.9h-0.1L167.6,55H179.2z",fill:"var(--fill, black)"}),o.a.createElement("path",{d:"M205.4,34.2h-10.9v-5.5h27.8v5.5h-10.9v35.5h-6V34.2z",fill:"var(--fill, black)"}),o.a.createElement("path",{d:"M234.2,28.7h25.4v5.8h-19.4v11.7h16.5v5.5h-16.5v12.1h19.4v5.8h-25.4V28.7z",fill:"var(--fill, black)"}))))}))(Ce||(Ce=ye(["\n  height: 2rem;\n"],["\n  height: 2rem;\n"]))),l.a.a(Ae||(Ae=ye(["\n  text-decoration: none;\n  color: #57b0ea;\n  text-transform: uppercase;\n  display: block;\n  font-size: 75%;\n  font-weight: bold;\n  margin: 0 0.25rem;\n"],["\n  text-decoration: none;\n  color: #57b0ea;\n  text-transform: uppercase;\n  display: block;\n  font-size: 75%;\n  font-weight: bold;\n  margin: 0 0.25rem;\n"]))));l.a.nav(Ne||(Ne=ye(["\n  display: flex;\n  flex-direction: row;\n\n  > "," {\n    line-height: 2rem;\n    margin-left: 1rem;\n  }\n\n  &,\n  &:visited {\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n\n  > "," {\n    line-height: 2rem;\n    margin-left: 1rem;\n  }\n\n  &,\n  &:visited {\n  }\n"])),Oe);function je(n){if(window.history){var e=be(be({},de.a.parse(window.location.search)),n);window.history.replaceState(null,"","?"+de.a.stringify(e))}}window.updateQuery=je;var ze=function(){var n=null,e=null;return{send:function(t){e=t,n&&n(t)},listen:function(t){n=t,e&&n(e)}}}();window.authCallback=function(n){ze.send(n)};var Se,Pe,Ce,Ae,Ne,Te=de.a.parse(window.location.search),Me=Object(c.a)({id:"app",context:{query:Te,token:void 0,gist:void 0,machine:ue,user:void 0},invoke:[{id:"test",src:function(){return function(n){ze.listen((function(e){n({type:"CODE",code:e})}))}}}],type:"parallel",states:{auth:{initial:"checkingCode",states:{checkingCode:{on:{"":[{target:"authorizing",cond:function(n){return!!n.query.code}},{target:"gettingUser",cond:function(n){return!!n.token}},{target:"unauthorized",actions:Object(d.b)({machine:ue})}]}},authorizing:{invoke:{src:function(n,e){return fetch("https://xstate-gist.azurewebsites.net/api/GistPost?code="+e.code+"&redirect_uri="+encodeURI(window.location.href)).then((function(n){if(!n.ok)throw new Error("unauthorized");return n.json()})).then((function(n){if(n.error)throw new Error("expired code");return n}))},onDone:{target:"gettingUser",actions:Object(d.b)({token:function(n,e){return e.data.access_token}})},onError:{target:"unauthorized",actions:function(n,e){return alert(e.data)}}}},gettingUser:{invoke:{src:function(n){return fetch("https://api.github.com/user",{headers:{Authorization:"token "+n.token}}).then((function(n){if(!n.ok)throw new Error("Unable to get user");return n.json()}))},onDone:{target:"authorized",actions:Object(d.b)({user:function(n,e){return e.data}})},onError:{target:"unauthorized",actions:function(n,e){console.error(e),Re.notify({message:"Authorization failed",description:e.data.message,severity:"error"})}}}},authorized:{type:"parallel",states:{user:{},gist:{initial:"idle",states:{idle:{initial:"default",states:{default:{},patched:{after:{1e3:"default"}},posted:{after:{1e3:"default"}}}},patching:{invoke:{src:function(n,e){return fetch("https://api.github.com/gists/"+n.gist.id,{method:"post",body:JSON.stringify({description:"Generated by XState Viz: https://xstate.js.org/viz",public:!0,files:{"machine.js":{content:e.code}}}),headers:{Authorization:"token "+n.token}}).then((function(n){return we(void 0,void 0,void 0,(function(){var e;return xe(this,(function(t){switch(t.label){case 0:return n.ok?[3,2]:(e=Error.bind,[4,n.json()]);case 1:throw new(e.apply(Error,[void 0,t.sent().message]));case 2:return[2,n.json()]}}))}))}))},onDone:{target:"idle.patched",actions:[function(n){return Re.notify({message:"Saved!",description:"Copy and paste the URL to share the visualization.",severity:"success"})}]},onError:{target:"idle",actions:function(n,e){console.error(e),Re.notify({message:"Failed to save machine",severity:"error",description:e.data.message})}}}},posting:{invoke:{src:function(n,e){return fetch("https://api.github.com/gists",{method:"post",body:JSON.stringify({description:"Generated by XState Viz: https://xstate.js.org/viz",public:!0,files:{"machine.js":{content:e.code}}}),headers:{Authorization:"token "+n.token}}).then((function(n){if(!n.ok)throw new Error("Unable to post gist");return n.json()}))},onDone:{target:"idle.posted",actions:[Object(d.b)({gist:function(n,e){return e.data}}),function(){return Re.notify({message:"Visualization uploaded!",description:"Copy and paste the URL to share the visualization.",severity:"success"})},function(n){return je({gist:n.gist.id})}]}}}},on:{"GIST.SAVE":[{target:".idle",cond:function(n,e){try{vt(e.code)}catch(e){return console.error(e),Re.notify({message:"Failed to upload machine",severity:"error",description:e.message}),!0}return!1}},{target:".patching",cond:function(n){return!!n.gist&&n.gist.owner.login===n.user.login}},{target:".posting"}]}}},on:{LOGOUT:{target:"unauthorized",actions:Object(d.b)({token:void 0,user:void 0})}}},unauthorized:{on:{LOGIN:"pendingAuthorization","GIST.SAVE":"pendingAuthorization"}},pendingAuthorization:{entry:function(){window.open("https://github.com/login/oauth/authorize?client_id=39c1ec91c4ed507f6e4c&scope=gist","Login with GitHub","width=800,height=600")},on:{CODE:"authorizing","AUTH.CANCEL":"unauthorized"},after:{AUTH_TIMEOUT:{target:"unauthorized",actions:function(){Re.notify({message:"Authorization timed out",severity:"error"})}}}}},on:{LOGIN:".pendingAuthorization"}},gist:{initial:"checking",states:{checking:{on:{"":[{target:"fetching",cond:function(n){return!!n.query.gist}},{target:"idle"}]}},idle:{},fetching:{invoke:{src:function(n){var e=function(n){var e=n.match(/([a-zA-Z0-9]{32})/);return e?e[0]:null}(n.query.gist);return e?fetch("https://api.github.com/gists/"+e,{headers:{Accept:"application/json"}}).then((function(n){return we(void 0,void 0,void 0,(function(){var e;return xe(this,(function(t){switch(t.label){case 0:return n.ok?[3,2]:(e=Error.bind,[4,n.json()]);case 1:throw new(e.apply(Error,[void 0,t.sent().message]));case 2:return[2,n.json()]}}))}))})):Promise.reject("Invalid gist ID.")},onDone:{target:"loaded",actions:Object(d.b)({gist:function(n,e){return e.data},machine:function(n,e){return e.data.files["machine.js"].content}})},onError:{target:"idle",actions:[Object(d.b)({gist:void 0}),function(n,e){Re.notify({message:"Gist not found",description:""+e.data,severity:"error"})}]}}},loaded:{entry:function(n,e){return Re.notify("Gist loaded!")}}}}}},{delays:{AUTH_TIMEOUT:15e3}}),Ie=Object(r.createContext)({state:Me.initialState,send:function(){},service:{}});function De(n,e){switch(n){case"full":switch(e){case"TOGGLE":return"viz";default:return n}case"viz":switch(e){case"TOGGLE":return"full";default:return n}default:return n}}var Le=Object(s.b)(re).start(),Re={toJSON:function(){return{id:"notifications"}},id:"notifications",send:Le.send.bind(Le),subscribe:Le.subscribe.bind(Le),notify:function(n){return Le.send({type:"NOTIFICATIONS.QUEUE",data:"string"===typeof n?{message:n,severity:"info"}:n})}};var Ue=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n};var _e,Fe,Ge,Xe,Je,He,Ye,Ve,Be,We=l.a.ul(_e||(_e=Ue(["\n  list-style: none;\n  padding: 0;\n  overflow-y: scroll;\n"],["\n  list-style: none;\n  padding: 0;\n  overflow-y: scroll;\n"]))),qe=l.a.li(Fe||(Fe=Ue(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border-bottom: 1px solid #444;\n\n  > pre {\n    margin: 0;\n    flex-grow: 1;\n  }\n\n  &[data-builtin] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  details {\n    width: 100%;\n  }\n\n  summary {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    height: 2rem;\n    padding: 0 0.5rem;\n\n    > :first-child {\n      margin-right: auto;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border-bottom: 1px solid #444;\n\n  > pre {\n    margin: 0;\n    flex-grow: 1;\n  }\n\n  &[data-builtin] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  details {\n    width: 100%;\n  }\n\n  summary {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    height: 2rem;\n    padding: 0 0.5rem;\n\n    > :first-child {\n      margin-right: auto;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n"]))),Qe=l.a.section(Ge||(Ge=Ue(["\n  display: grid;\n  grid-template-rows: 1fr 10rem;\n  grid-template-areas: 'events' 'editor';\n  overflow: hidden;\n"],["\n  display: grid;\n  grid-template-rows: 1fr 10rem;\n  grid-template-areas: 'events' 'editor';\n  overflow: hidden;\n"]))),$e=l.a.div(Xe||(Xe=Ue(["\n  margin-bottom: 0.5rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-content: flex-start;\n  flex-wrap: wrap;\n  overflow-y: auto;\n"],["\n  margin-bottom: 0.5rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-content: flex-start;\n  flex-wrap: wrap;\n  overflow-y: auto;\n"]))),Ze=l.a.button(Je||(Je=Ue(["\n  appearance: none;\n  margin-right: 0.5rem;\n  margin-bottom: 0.5rem;\n  background-color: var(--color-primary);\n  border: none;\n  color: white;\n  padding: 0.25rem 0.5rem;\n  border-radius: 2rem;\n  font-size: 0.75em;\n  font-weight: bold;\n"],["\n  appearance: none;\n  margin-right: 0.5rem;\n  margin-bottom: 0.5rem;\n  background-color: var(--color-primary);\n  border: none;\n  color: white;\n  padding: 0.25rem 0.5rem;\n  border-radius: 2rem;\n  font-size: 0.75em;\n  font-weight: bold;\n"]))),Ke=l.a.div(He||(He=Ue(["\n  display: grid;\n  grid-template-columns: 60% 40%;\n  grid-template-rows: 1fr auto;\n  grid-template-areas: 'code events' 'code send';\n  padding: 1rem;\n  border-top: 2px solid #444;\n\n  > "," {\n    grid-area: send;\n  }\n\n  > "," {\n    grid-area events;\n  }\n"],["\n  display: grid;\n  grid-template-columns: 60% 40%;\n  grid-template-rows: 1fr auto;\n  grid-template-areas: 'code events' 'code send';\n  padding: 1rem;\n  border-top: 2px solid #444;\n\n  > "," {\n    grid-area: send;\n  }\n\n  > "," {\n    grid-area events;\n  }\n"])),q,$e),nt=l.a.time(Ye||(Ye=Ue(["\n  color: #777;\n  margin-left: 0.5rem;\n"],["\n  color: #777;\n  margin-left: 0.5rem;\n"]))),et={eventCode:JSON.stringify({type:""},null,2)},tt=Object(c.a)({id:"sendEvent",initial:"idle",context:et,states:{idle:{on:{UPDATE:{actions:Object(d.b)({eventCode:function(n,e){return e.value}})},AUTOFILL:{actions:[Object(d.b)({eventCode:function(n,e){return e.value}}),"moveCursor"]},SEND:{actions:"sendToService"}}}}}),rt=function(n){var e=n.records,t=n.state,a=n.service,i=Object(Pn.useMachine)(tt,{execute:!1}),l=i[0],c=i[1],s=i[2],d=Object(r.useRef)(null),u=Object(r.useRef)(null);Object(r.useEffect)((function(){s.execute(l,{moveCursor:function(){d.current&&(d.current.moveCursorTo(1),d.current.navigateLineEnd(),d.current.focus())}})}),[l,a]),Object(r.useEffect)((function(){u.current&&(u.current.scrollTop=u.current.scrollHeight)}),[u.current,e.length]);var p=Object(r.useCallback)((function(n){var e=n;if("string"===typeof n)try{e=JSON.parse(n)}catch(t){return void Re.notify({message:"Failed to send event",description:t.message,severity:"error"})}b(e.type)||a.send(e)}),[a]);return o.a.createElement(Qe,null,o.a.createElement(We,{ref:u},e.map((function(n,e){var t=n.event,r=n.time,a=JSON.stringify(t,null,2),i=b(t.type);return o.a.createElement(qe,{key:e,title:"Double-click to send, click to edit","data-builtin":i||void 0},o.a.createElement("details",null,o.a.createElement("summary",null,i?o.a.createElement("em",null,t.type):o.a.createElement(o.a.Fragment,null,o.a.createElement("strong",{title:t.type},t.type),o.a.createElement(q,{"data-variant":"link",onClick:function(){p(t)}},"Replay"),o.a.createElement(q,{"data-variant":"link",onClick:function(n){n.stopPropagation(),c("AUTOFILL",{value:a})}},"Edit")),o.a.createElement(nt,null,Object(ne.format)(r,"hh:mm:ss.SS"))),o.a.createElement("pre",null,i?t.type:JSON.stringify(t,null,2))))}))),o.a.createElement(Ke,null,o.a.createElement($e,null,function(n){return n.nextEvents.filter((function(n){return!b(n)}))}(t).map((function(n){return o.a.createElement(Ze,{key:n,onClick:function(e){e.stopPropagation(),c("AUTOFILL",{value:JSON.stringify({type:n},null,2)})}},n)}))),o.a.createElement(Kn.a,{ref:function(n){n&&(d.current=n.editor)},mode:"javascript",theme:"monokai",editorProps:{$blockScrolling:!0},value:l.context.eventCode,onChange:function(n){c("UPDATE",{value:n})},setOptions:{tabSize:2,fontSize:"12px"},width:"100%",height:"5em",showGutter:!1,readOnly:!1,cursorStart:3}),o.a.createElement(q,{"data-variant":"primary","data-size":"full",onClick:function(){return p(l.context.eventCode)}},"Send")))},ot=(t(437),t(438),t(110)),at=t.n(ot),it=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},lt=l.a.div(Ve||(Ve=it(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n"],["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n"]))),ct=(l.a.div(Be||(Be=it(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-column-gap: 1rem;\n"],["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-column-gap: 1rem;\n"]))),function(n){var e=Object(r.useState)(n.code),t=e[0],a=e[1],i=Object(r.useContext)(Ie).state,l=n.onChange,c=(n.onSave,n.height),s=void 0===c?"100%":c,d=(n.changeText,n.mode),u=void 0===d?"javascript":d;i.matches({auth:{authorized:{gist:"patching"}}})||i.matches({auth:{authorized:{gist:"posting"}}});return o.a.createElement(lt,null,o.a.createElement(Kn.a,{mode:u,theme:"monokai",editorProps:{$blockScrolling:!0},value:t,onChange:function(n){a(n),at.a.debounce(l,1e3)(t)},setOptions:{tabSize:2,fontSize:"12px"},width:"100%",height:s,showGutter:!1,readOnly:!l,wrapEnabled:!0}))}),st=function(n){var e=n.code,t=n.onChange,r=n.onSave;return o.a.createElement(ct,{code:e,onChange:t,onSave:r})},dt=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},ut=function(){return(ut=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},pt=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]])}return t},ft=l.a.li(yt||(yt=dt(["\n  padding: 0 1rem;\n  border-bottom: 2px solid transparent;\n  list-style: none;\n  text-transform: uppercase;\n  user-select: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:not([data-active]):hover {\n    border-color: var(--color-secondary-light);\n  }\n\n  &[data-active] {\n    border-color: var(--color-secondary);\n  }\n"],["\n  padding: 0 1rem;\n  border-bottom: 2px solid transparent;\n  list-style: none;\n  text-transform: uppercase;\n  user-select: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:not([data-active]):hover {\n    border-color: var(--color-secondary-light);\n  }\n\n  &[data-active] {\n    border-color: var(--color-secondary);\n  }\n"]))),mt=l.a.ul(bt||(bt=dt(["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  margin: 0;\n  padding: 0;\n  flex-grow: 0;\n  flex-shrink: 0;\n  position: sticky;\n  top: 0;\n"],["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  margin: 0;\n  padding: 0;\n  flex-grow: 0;\n  flex-shrink: 0;\n  position: sticky;\n  top: 0;\n"]))),gt=l.a.div(wt||(wt=dt(["\n  background-color: var(--color-sidebar);\n  color: white;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 2rem 1fr;\n  border-top-left-radius: 1rem;\n  box-shadow: var(--shadow);\n  transition: transform 0.6s cubic-bezier(0.5, 0, 0.5, 1);\n  z-index: 1;\n"],["\n  background-color: var(--color-sidebar);\n  color: white;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 2rem 1fr;\n  border-top-left-radius: 1rem;\n  box-shadow: var(--shadow);\n  transition: transform 0.6s cubic-bezier(0.5, 0, 0.5, 1);\n  z-index: 1;\n"]))),ht=l.a.div(xt||(xt=dt(["\n  grid-area: content;\n  display: grid;\n  grid-template-columns: 1fr var(--sidebar-width, 25rem);\n  grid-template-rows: 1fr;\n  grid-template-areas: 'content sidebar';\n  font-family: sans-serif;\n  font-size: 12px;\n  overflow: hidden;\n  max-height: inherit;\n\n  @media (max-width: 900px) {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  > "," {\n    grid-area: sidebar;\n  }\n\n  > "," {\n    grid-area: content;\n  }\n\n  > * {\n    max-height: inherit;\n    overflow-y: auto;\n  }\n\n  [data-layout='viz'] & {\n    > :not(",") {\n      grid-column: 1 / -1;\n    }\n\n    > "," {\n      transform: translateX(100%);\n    }\n  }\n"],["\n  grid-area: content;\n  display: grid;\n  grid-template-columns: 1fr var(--sidebar-width, 25rem);\n  grid-template-rows: 1fr;\n  grid-template-areas: 'content sidebar';\n  font-family: sans-serif;\n  font-size: 12px;\n  overflow: hidden;\n  max-height: inherit;\n\n  @media (max-width: 900px) {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  > "," {\n    grid-area: sidebar;\n  }\n\n  > "," {\n    grid-area: content;\n  }\n\n  > * {\n    max-height: inherit;\n    overflow-y: auto;\n  }\n\n  [data-layout='viz'] & {\n    > :not(",") {\n      grid-column: 1 / -1;\n    }\n\n    > "," {\n      transform: translateX(100%);\n    }\n  }\n"])),gt,In,gt,gt);function vt(n){if("string"!==typeof n)return n;var e;try{e=new Function("Machine","interpret","assign","send","sendParent","spawn","raise","actions","XState",n)}catch(r){throw r}var t=[];try{e((function(n,e){var r=Object(c.a)(n,e);return t.push(r),r}),s.b,d.b,d.q,d.r,s.c,Q.raise,u.actions,u)}catch(r){throw r}return t[t.length-1]}var yt,bt,wt,xt,kt=function(n){var e=n.onSave,t=n.className,a=pt(n,["onSave","className"]),i=Object(r.useState)(0),l=i[0],c=i[1],d=Object(r.useState)([]),u=d[0],f=d[1],m=Object(r.useState)(vt(a.machine)),g=m[0],h=m[1];Object(r.useEffect)((function(){h(vt(a.machine))}),[a.machine]);var v=Object(r.useMemo)((function(){return Object(s.b)(g).start()}),[g,l]),y=Object(Pn.useService)(v)[0];Object(r.useEffect)((function(){var n={event:y.event,time:Date.now()};f(u.concat(n))}),[y]);var b=Object(r.useState)(function(){var n=vt(a.machine);return{preview:void 0,previewEvent:void 0,view:"definition",machine:n,code:"string"===typeof n?n:"Machine("+JSON.stringify(n.config,null,2)+")",toggledStates:{},events:[]}}()),w=b[0],x=b[1];function k(n,e){void 0===n&&(n=w.code),void 0===e&&(e=w.machine),f([]),c(l+1),h(e),x(ut(ut({},w),{code:n}))}var E=w.code;return o.a.createElement(ht,{className:t,key:E,style:{background:"var(--color-app-background)"}},o.a.createElement(Dn,{service:v,onReset:function(){return k()}}),o.a.createElement(gt,null,o.a.createElement(mt,null,["definition","state","events"].map((function(n){return o.a.createElement(ft,{onClick:function(){return x(ut(ut({},w),{view:n}))},key:n,"data-active":w.view===n||void 0},n)}))),function(n,t){var r=w.view,a=w.code;switch(r){case"definition":return o.a.createElement(st,{code:a,onChange:function(n){return function(n){var e;try{e=vt(n),Object(p.getEdges)(e)}catch(t){return Re.notify({message:"Failed to update machine",severity:"error",description:t.message}),void console.error(t)}k(n,e)}(n)},onSave:e});case"state":return o.a.createElement($n,{state:n,service:t});case"events":return o.a.createElement(rt,{state:n,service:t,records:u});default:return null}}(y,v)))},Et=function(){var n=Object(Pn.useMachine)(Me),e=n[0],t=n[1],a=n[2],i=Object(r.useReducer)(De,Te.layout||(Te.embed?"viz":"full")),l=i[0],c=i[1];return o.a.createElement(Ee,{"data-layout":l,"data-embed":Te.embed},o.a.createElement(ce,{notifier:Re}),o.a.createElement(Ie.Provider,{value:{state:e,send:t,service:a}},e.matches({gist:"fetching"})?o.a.createElement(me,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(kt,{machine:e.context.machine,onSave:function(n){t("GIST.SAVE",{code:n})}}),o.a.createElement(ve,{onClick:function(){return c("TOGGLE")}},{full:"Hide",viz:"Code"}[l]||"Show"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=t(111),jt=t.n(Ot).a.parse(window.location.search);jt.code&&window.opener?(window.opener.authCallback(jt.code),setTimeout((function(){return window.close()}))):(i.a.render(o.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})))}},[[114,1,2]]]);
//# sourceMappingURL=main.d75aa18b.chunk.js.map