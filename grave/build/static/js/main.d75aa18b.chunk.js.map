{"version":3,"sources":["../../lib/utils.js","../../lib/tracker.js","../../lib/Edge.js","../../lib/Button.js","../../lib/Popover.js","../../lib/StateChartAction.js","../../lib/StateChartGuard.js","../../lib/StateChartNode.js","../../lib/StateChartVisualization.js","../../lib/VizTabs.js","../../lib/InitialEdge.js","../../lib/EventName.js","../../lib/StatePanel.js","../../lib/Notifications.js","../../lib/Loader.js","../../lib/LayoutButton.js","../../lib/examples.js","../../lib/App.js","../../lib/logo.js","../../lib/Header.js","../../lib/EventPanel.js","../../lib/Editor.js","../../lib/CodePanel.js","../../lib/StateChart.js","App.tsx","serviceWorker.ts","index.tsx"],"names":["flatten","array","_a","concat","apply","DELAY_EVENT_REGEX","serializeEdge","edge","cond","toString","replace","source","id","event","target","isHidden","el","rect","getBoundingClientRect","width","height","relative","childRect","parentElement","parentRect","top","right","left","bottom","center","x","y","isBuiltInEvent","eventType","indexOf","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","this","tracker","Tracker","timeout_1","_this","elements","Map","window","addEventListener","cancelAnimationFrame","requestAnimationFrame","updateAll","Array","from","keys","forEach","key","update","get","element","set","listeners","Set","undefined","hidden","data","notify","desc","querySelectorAll","getAttribute","listen","listener","add","__extends","extendStatics","d","b","setPrototypeOf","__proto__","__","constructor","create","templateObject_1","templateObject_2","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","templateObject_9","templateObject_10","templateObject_11","templateObject_12","templateObject_13","templateObject_14","Edge","_super","state","eventElement","sourceElement","targetElement","sourceData","props","targetData","eventData","ref","React","createRef","componentDidMount","eventId","setState","parentData","parent","render","svgRef","svg","sourceRect","eventRect","eventContainerRect","targetRect","eventCenterPt","isSelf","ptFns","transition","internal","push","prevPt","color","Math","min","magic","startPt_1","endSide","endPtX","abs","dx","endPt_1","dy","xDir_1","sign","yDir","pts","reduce","acc","ptFn","circles","slice","path","point","prevPoint","nextPoint","nextDx","nextDy","midpoint1","midpoint2","isHighlighted","preview","createElement","stroke","strokeWidth","fill","markerEnd","Component","InitialEdge","r","cx","cy","EventName","match","isMs","Number","isFinite","__makeTemplateObject","cooked","raw","defineProperty","value","StyledButton","styled","button","StyledPopover","aside","Popover","children","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","Code","SyntaxHighlighter","language","style","monokai","customStyle","margin","StyledStateChartAction","li","StyledStateChartActionText","span","StateChartAction","action","dataAttrs","type","actionTypes","assignment","title","Fragment","map","invoke","send","sendAction","JSON","stringify","to","log","StyledSCGuard","div","StateChartGuard","guard","valid","predicate","context","name","StyledChildStates","StyledChildStatesToggle","StyledToken","StyledStateNodeHeader","header","StyledStateNode","StyledStateNodeState","StyledStateNodeEvents","StyledStateNodeActions","ul","StyledEventDot","StyledEventButtonLabel","label","StyledEventButton","StyledEvent","StyledActiveAnim","StateChartNode","toggledValue","localStorage","getItem","stateNode","toggled","useState","toggledState","setToggledState","stateRef","useRef","useEffect","current","_b","timerRestarts","setTimerRestarts","onEvent","onPreEvent","onExitPreEvent","onReset","transitionCount","actions","some","sendId","isActive","matches","join","isPreview","dataType","level","onClick","onEntry","onExit","stateActions","definition","actionString","invocation","states","childStateNode","toggledStates","onSelectServiceId","stopPropagation","setItem","getEdges","depth","ownEvent","disabled","nextEvents","delay","getEventDelay","delayExpr","machine","options","delays","isTransient","onMouseOver","onMouseOut","StyledVisualization","StateChartVisualization","edges","service","visible","onSelectService","setTransitionCount","_c","useService","_d","previewEvent","err","console","error","position","overflow","pointerEvents","markerWidth","markerHeight","refX","refY","markerUnits","orient","initialStateNodes","stateKeys","initialStateNode","nextState","serviceId","StyledStateChartContainer","section","StateChartContainer","StyledField","Field","opacity","StyledDetails","details","StyledPanelAction","StatePanel","simplifiedState","open","values","child","notificationsMachine","Machine","notifications","initial","inactive","active","entry","on","ctx","produce","draft","splice","index","unshift","StyledNotificationDismissButton","StyledNotification","StyledNotifications","StyledNotificationDescription","Notifications","notifier","setCurrent","subscribe","notification","severity","notificationsActor","message","description","examples","StyledLoader","Loader","StyledLayoutButton","LayoutButton","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","g","_","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","StyledHeader","StyledApp","main","StyledLink","className","version","xmlnsXlink","viewBox","xmlSpace","points","a","nav","updateQuery","query","history","fullQuery","queryString","parse","location","search","replaceState","authActor","code","_code","l","createAuthActor","authCallback","appMachine","token","gist","user","src","cb","auth","checkingCode","authorizing","fetch","encodeURI","href","response","ok","Error","json","onDone","access_token","onError","alert","gettingUser","headers","Authorization","authorized","idle","default","patched","after","1000","posted","patching","method","public","files","content","bind","posting","toMachine","owner","login","LOGOUT","unauthorized","LOGIN","pendingAuthorization","CODE","AUTH_TIMEOUT","checking","fetching","gistQuery","gistMatch","parseGist","Accept","loaded","AppContext","createContext","initialState","layoutReducer","notificationsService","interpret","start","toJSON","StyledEventPanelEvents","StyledEventPanelEvent","StyledEventPanel","StyledEventPanelButtons","StyledEventPanelButton","StyledEventPanelEditor","StyledTime","time","sendEventContext","eventCode","sendEventMachine","UPDATE","AUTOFILL","SEND","EventPanel","records","useMachine","execute","sendEventService","editorRef","eventsRef","moveCursor","moveCursorTo","navigateLineEnd","focus","scrollTop","scrollHeight","sendToService","useCallback","eventOrJSON","pastEventCode","isBuiltIn","format","filter","getNextEvents","nextEvent","AceEditor","editor","mode","theme","editorProps","$blockScrolling","onChange","setOptions","tabSize","fontSize","showGutter","readOnly","cursorStart","StyledEditor","Editor","setCode","useContext","onSave","changeText","debounce","wrapEnabled","CodePanel","StyledViewTab","StyledViewTabs","StyledSidebar","StyledStateChart","createMachine","Function","machines","config","XState","spawn","raise","StateChart","resetCount","setResetCount","events","setEvents","setMachine","useMemo","formattedEvent","Date","now","_e","_machine","view","allState","reset","background","updateMachine","renderView","App","useReducer","layout","embed","dispatchLayout","Provider","full","viz","Boolean","hostname","opener","setTimeout","close","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d75aa18b.chunk.js","sourcesContent":["export function isChildOf(childState, parentState) {\n    var marker = childState;\n    while (marker.parent && marker.parent !== parentState) {\n        marker = marker.parent;\n    }\n    return marker === parentState;\n}\nexport function flatten(array) {\n    var _a;\n    return (_a = []).concat.apply(_a, array);\n}\nexport function transitions(stateNode) {\n    return flatten(stateNode.ownEvents.map(function (event) {\n        return stateNode.definition.on[event];\n    }));\n}\nexport function condToString(cond) {\n    return cond.type;\n    // if (typeof cond === \"function\") {\n    //   return cond.toString();\n    //   // return cond\n    //   //   .toString()\n    //   //   .replace(/\\n/g, \"\")\n    //   //   .match(/\\{(.*)\\}/)![1]\n    //   //   .trim();\n    // }\n    // return cond;\n}\nexport var DELAY_EVENT_REGEX = /^xstate\\.after\\((.+)\\)#/;\nexport function getEventDelay(event) {\n    var match = event.match(DELAY_EVENT_REGEX);\n    if (match) {\n        return Number.isFinite(+match[1]) ? +match[1] : match[1];\n    }\n    return false;\n}\nexport function serializeEdge(edge) {\n    var cond = edge.cond ? \"[\" + edge.cond.toString().replace(/\\n/g, '') + \"]\" : '';\n    return edge.source.id + \":\" + edge.event + cond + \"->\" + edge.target.id;\n}\nexport function isHidden(el) {\n    if (!el) {\n        return true;\n    }\n    var rect = el.getBoundingClientRect();\n    if (rect.width === 0 && rect.height === 0) {\n        return true;\n    }\n    return false;\n}\nexport function relative(childRect, parentElement) {\n    var parentRect = parentElement.getBoundingClientRect();\n    return {\n        top: childRect.top - parentRect.top,\n        right: childRect.right - parentRect.left,\n        bottom: childRect.bottom - parentRect.top,\n        left: childRect.left - parentRect.left,\n        width: childRect.width,\n        height: childRect.height\n    };\n}\nexport function initialStateNodes(stateNode) {\n    var stateKeys = Object.keys(stateNode.states);\n    return stateNode.initialStateNodes.concat(flatten(stateKeys.map(function (key) {\n        var childStateNode = stateNode.states[key];\n        if (childStateNode.type === 'compound' ||\n            childStateNode.type === 'parallel') {\n            return initialStateNodes(stateNode.states[key]);\n        }\n        return [];\n    })));\n}\nexport function stateActions(stateNode) {\n    return stateNode.onEntry.concat(stateNode.onExit);\n}\nexport function center(rect) {\n    return {\n        x: rect.left + rect.width / 2,\n        y: rect.top + rect.height / 2\n    };\n}\nexport function isBuiltInEvent(eventType) {\n    return (eventType.indexOf('xstate.') === 0 ||\n        eventType.indexOf('done.') === 0 ||\n        eventType === '');\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { isHidden } from './utils';\nvar Tracker = /** @class */ (function () {\n    function Tracker() {\n        var _this = this;\n        this.elements = new Map();\n        if (typeof window !== 'undefined') {\n            var timeout_1;\n            window.addEventListener('resize', function () {\n                if (timeout_1) {\n                    cancelAnimationFrame(timeout_1);\n                }\n                timeout_1 = requestAnimationFrame(function () {\n                    _this.updateAll();\n                });\n            });\n        }\n    }\n    Tracker.prototype.updateAll = function () {\n        var _this = this;\n        Array.from(this.elements.keys()).forEach(function (key) {\n            _this.update(key, _this.elements.get(key).element);\n        });\n    };\n    Tracker.prototype.update = function (id, element) {\n        var _this = this;\n        if (!this.elements.get(id)) {\n            this.elements.set(id, {\n                listeners: new Set(),\n                element: element || undefined,\n                rect: element ? element.getBoundingClientRect() : undefined,\n                hidden: isHidden(element)\n            });\n        }\n        var data = __assign(__assign({}, this.elements.get(id)), { element: element || undefined, rect: element ? element.getBoundingClientRect() : undefined, hidden: isHidden(element) });\n        this.notify(data);\n        if (element) {\n            var desc = element.querySelectorAll(\"[data-id]\");\n            Array.from(desc).forEach(function (el) {\n                var id = el.getAttribute(\"data-id\");\n                _this.update(id, el);\n            });\n        }\n    };\n    Tracker.prototype.listen = function (id, listener) {\n        if (!this.elements.get(id)) {\n            this.elements.set(id, {\n                listeners: new Set(),\n                element: undefined,\n                rect: undefined,\n                hidden: true\n            });\n        }\n        var data = this.elements.get(id);\n        data.listeners.add(listener);\n        this.notify(data);\n    };\n    Tracker.prototype.get = function (id) {\n        if (this.elements.get(id)) {\n            return this.elements.get(id);\n        }\n        return undefined;\n    };\n    Tracker.prototype.notify = function (data) {\n        data.listeners.forEach(function (listener) {\n            listener(data);\n        });\n    };\n    return Tracker;\n}());\nvar tracker = new Tracker();\nexport { tracker };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { Component } from 'react';\nimport { serializeEdge, isHidden, relative, center } from './utils';\nimport { tracker } from './tracker';\nfunction maybeGet(value, getter) {\n    return value ? getter(value) : undefined;\n}\nvar Edge = /** @class */ (function (_super) {\n    __extends(Edge, _super);\n    function Edge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            eventElement: null,\n            sourceElement: null,\n            targetElement: null,\n            sourceData: tracker.get(_this.props.edge.source.id),\n            targetData: tracker.get(_this.props.edge.target.id),\n            eventData: tracker.get(serializeEdge(_this.props.edge))\n        };\n        _this.ref = React.createRef();\n        return _this;\n    }\n    Edge.prototype.componentDidMount = function () {\n        var _this = this;\n        var edge = this.props.edge;\n        var eventId = serializeEdge(edge);\n        tracker.listen(eventId, function (data) {\n            _this.setState({ eventData: data });\n        });\n        tracker.listen(edge.source.id, function (data) {\n            _this.setState({ sourceData: data });\n        });\n        tracker.listen(edge.target.id, function (data) {\n            var target = edge.target;\n            var parentData = data;\n            while (isHidden(parentData.element)) {\n                if (!target.parent) {\n                    break;\n                }\n                target = target.parent;\n                parentData = tracker.get(target.id);\n                if (!parentData) {\n                    break;\n                }\n            }\n            _this.setState({ targetData: parentData || undefined });\n        });\n    };\n    Edge.prototype.render = function () {\n        var edge = this.props.edge;\n        var _a = this.state, sourceData = _a.sourceData, eventData = _a.eventData, targetData = _a.targetData;\n        if (!sourceData ||\n            sourceData.hidden ||\n            !eventData ||\n            eventData.hidden ||\n            !targetData ||\n            targetData.hidden) {\n            return null;\n        }\n        var strokeWidth = 2;\n        var svgRef = this.props.svg;\n        var sourceRect = relative(this.state.sourceData.rect, svgRef);\n        var eventRect = relative(this.state.eventData.rect, svgRef);\n        var eventContainerRect = relative(this.state.eventData.element.parentElement.getBoundingClientRect(), svgRef);\n        var targetRect = relative(this.state.targetData.rect, svgRef);\n        var magic = 10;\n        var borderOffset = 5;\n        var eventCenterPt = center(eventRect);\n        var targetCenterPt = center(targetRect);\n        var isSelf = edge.source === edge.target;\n        var isInternal = edge.transition.internal;\n        var ptFns = [];\n        if (isInternal) {\n            ptFns.push(function () { return ({\n                x: eventRect.left,\n                y: eventCenterPt.y\n            }); });\n            ptFns.push(function (prevPt) { return ({\n                x: sourceRect.right,\n                y: prevPt.y\n            }); });\n            if (!isSelf) {\n                ptFns.push(function (prevPt) { return ({\n                    x: targetRect.right,\n                    y: prevPt.y,\n                    color: 'green'\n                }); }, function () { return ({\n                    x: targetRect.right - magic,\n                    y: targetRect.top - magic\n                }); }, function (prevPt) { return ({\n                    x: prevPt.x,\n                    y: targetRect.top\n                }); });\n            }\n            else {\n                ptFns.push(function (prevPt) {\n                    if (prevPt.y > sourceRect.bottom) {\n                        return {\n                            x: targetRect.right - magic,\n                            y: sourceRect.bottom\n                        };\n                    }\n                    else {\n                        return {\n                            x: targetRect.right,\n                            y: prevPt.y\n                        };\n                    }\n                });\n            }\n        }\n        else if (isSelf) {\n            ptFns.push(function () { return ({\n                x: sourceRect.right,\n                y: Math.min(eventCenterPt.y, sourceRect.bottom)\n            }); }, function (prevPt) { return ({\n                x: eventRect.left,\n                y: eventCenterPt.y\n            }); }, function (prevPt) { return ({\n                x: eventRect.right,\n                y: eventCenterPt.y\n            }); }, function (prevPt) { return ({\n                x: eventRect.right + magic,\n                y: eventRect.bottom\n            }); }, function (prevPt) { return ({\n                x: eventRect.right + magic * 2,\n                y: eventCenterPt.y\n            }); }, function (prevPt) { return ({\n                x: eventRect.right + magic,\n                y: eventRect.top\n            }); }, function (prevPt) { return ({\n                x: eventRect.right,\n                y: eventCenterPt.y\n            }); });\n        }\n        else {\n            // go through event label\n            ptFns.push(function () { return ({\n                x: sourceRect.right,\n                y: Math.min(eventCenterPt.y, sourceRect.bottom)\n            }); }, function () { return ({\n                x: eventRect.left,\n                y: eventCenterPt.y\n            }); }, function () { return ({\n                x: eventRect.left,\n                y: eventCenterPt.y\n            }); }, function () { return ({\n                x: eventRect.right,\n                y: eventCenterPt.y\n            }); });\n            var startPt_1 = {\n                x: eventRect.right + magic,\n                y: eventCenterPt.y\n            };\n            var endSide = void 0;\n            var endPtX = startPt_1.x < targetRect.right && startPt_1.x > targetRect.left\n                ? startPt_1.x\n                : Math.abs(eventRect.right - targetRect.left) <\n                    Math.abs(eventRect.right - targetRect.right)\n                    ? targetRect.left\n                    : targetRect.right;\n            var dx = endPtX - startPt_1.x;\n            var endPt_1 = {\n                x: endPtX,\n                y: dx < 0\n                    ? targetRect.top\n                    : startPt_1.y < targetRect.bottom && startPt_1.y > targetRect.top\n                        ? startPt_1.y\n                        : Math.abs(eventContainerRect.bottom - targetRect.top) <\n                            Math.abs(eventContainerRect.bottom - targetRect.bottom)\n                            ? targetRect.top\n                            : targetRect.bottom\n            };\n            var dy = endPt_1.y - startPt_1.y;\n            if (endPt_1.y === targetRect.top) {\n                endPt_1.y -= borderOffset;\n                endSide = 'top';\n                if (endPt_1.x === targetRect.right) {\n                    endPt_1.x -= magic;\n                }\n                else if (endPt_1.x === targetRect.left) {\n                    endPt_1.x += magic;\n                }\n            }\n            else if (endPt_1.y === targetRect.bottom) {\n                endPt_1.y += borderOffset;\n                endSide = 'bottom';\n                if (endPt_1.x === targetRect.right) {\n                    endPt_1.x -= magic;\n                }\n                else if (endPt_1.x === targetRect.left) {\n                    endPt_1.x += magic;\n                }\n            }\n            else {\n                if (endPt_1.x === targetRect.right) {\n                    endPt_1.y = targetRect.top;\n                    endSide = 'top';\n                }\n                else {\n                    endPt_1.x -= borderOffset;\n                    endSide = 'left';\n                }\n            }\n            var slope = dy / dx;\n            var xDir_1 = Math.sign(dx);\n            var yDir = Math.sign(dy);\n            ptFns.push(function () { return startPt_1; });\n            if (xDir_1 === -1) {\n                if (yDir === -1) {\n                    ptFns.push(function (prevPt) { return ({\n                        x: prevPt.x,\n                        y: Math.min(sourceRect.top - magic, targetRect.top - magic)\n                    }); });\n                }\n                else {\n                    // ptFns.push(prevPt => ({\n                    //   x: prevPt.x,\n                    //   y: Math.max(\n                    //     startPt.y + magic,\n                    //     sourceRect.bottom,\n                    //     eventContainerRect.bottom\n                    //   )\n                    // }));\n                    if (sourceRect.bottom > startPt_1.y + magic) {\n                        ptFns.push(function (prevPt) { return ({\n                            x: prevPt.x,\n                            y: Math.min(sourceRect.bottom + magic, endPt_1.y - magic)\n                        }); });\n                        ptFns.push(function (prevPt) { return ({\n                            x: prevPt.x + magic * xDir_1,\n                            y: prevPt.y\n                        }); });\n                    }\n                    else {\n                        ptFns.push(function (prevPt) { return ({\n                            x: prevPt.x,\n                            y: Math.min(eventContainerRect.bottom + magic, endPt_1.y - magic)\n                        }); });\n                    }\n                }\n            }\n            if (endSide === 'top') {\n                ptFns.push(function () { return ({\n                    x: endPt_1.x,\n                    y: endPt_1.y - magic\n                }); });\n            }\n            else if (endSide === 'bottom') {\n                ptFns.push(function () { return ({\n                    x: endPt_1.x,\n                    y: endPt_1.y + magic\n                }); });\n            }\n            ptFns.push(function () { return endPt_1; }, function () { return endPt_1; });\n        }\n        var pts = ptFns.reduce(function (acc, ptFn, i) {\n            acc.push(ptFn(acc[i - 1] || acc[0]));\n            return acc;\n        }, []);\n        var circles = pts.slice();\n        var path = pts.reduce(function (acc, point, i) {\n            if (i === 0) {\n                return \"M \" + point.x + \",\" + point.y;\n            }\n            if (i === pts.length - 1) {\n                return acc;\n            }\n            var prevPoint = pts[i - 1];\n            var nextPoint = pts[i + 1];\n            var dx = point.x - prevPoint.x;\n            var dy = point.y - prevPoint.y;\n            var nextDx = nextPoint.x - point.x;\n            var nextDy = nextPoint.y - point.y;\n            var midpoint1 = {\n                x: prevPoint.x + dx / 2,\n                y: prevPoint.y + dy / 2\n            };\n            var midpoint2 = {\n                x: point.x + nextDx / 2,\n                y: point.y + nextDy / 2\n            };\n            circles.push(midpoint1, midpoint2);\n            return (\n            // acc + `L ${midpoint1.x},${midpoint1.y} L ${midpoint2.x},${midpoint2.y}`\n            acc +\n                (\"L \" + midpoint1.x + \",\" + midpoint1.y + \" Q \" + point.x + \",\" + point.y + \" \" + midpoint2.x + \",\" + midpoint2.y + \" \"));\n        }, '');\n        var isHighlighted = this.props.preview;\n        return (React.createElement(\"g\", null,\n            React.createElement(\"path\", { d: path, stroke: isHighlighted ? 'var(--color-edge-active)' : 'var(--color-edge)', strokeWidth: strokeWidth, fill: \"none\", markerEnd: isHighlighted ? \"url(#marker-preview)\" : \"url(#marker)\", ref: this.ref }),\n            process.env.NODE_ENV === 'development'\n                ? circles.map(function (circle, i) {\n                    var fill = i > pts.length ? 'red' : 'blue';\n                    return (React.createElement(\"circle\", { key: i, cx: circle.x, cy: circle.y, r: i > pts.length ? 0.5 : 1, fill: circle.color || fill },\n                        React.createElement(\"text\", null, i)));\n                })\n                : null));\n    };\n    return Edge;\n}(Component));\nexport { Edge };\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport styled from 'styled-components';\nexport var StyledButton = styled.button(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n  height: 2rem;\\n  border-radius: 0.25rem;\\n  border: none;\\n  font-weight: bold;\\n  cursor: pointer;\\n  transition: all 0.3s ease-in-out;\\n  flex-shrink: 0;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:hover {\\n    background: white;\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  &[data-variant='primary'] {\\n    background: white;\\n    color: #111;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='secondary'] {\\n    background: #656565;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='link'] {\\n    background: transparent;\\n    color: var(--color-link);\\n    letter-spacing: 0;\\n    height: auto;\\n    padding: 0;\\n    margin-left: 0.5rem;\\n  }\\n\\n  &[data-size='full'] {\\n    width: 100%;\\n  }\\n\\n  &:disabled {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\"], [\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n  height: 2rem;\\n  border-radius: 0.25rem;\\n  border: none;\\n  font-weight: bold;\\n  cursor: pointer;\\n  transition: all 0.3s ease-in-out;\\n  flex-shrink: 0;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:hover {\\n    background: white;\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  &[data-variant='primary'] {\\n    background: white;\\n    color: #111;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='secondary'] {\\n    background: #656565;\\n    border-radius: 2px;\\n    border: none;\\n  }\\n\\n  &[data-variant='link'] {\\n    background: transparent;\\n    color: var(--color-link);\\n    letter-spacing: 0;\\n    height: auto;\\n    padding: 0;\\n    margin-left: 0.5rem;\\n  }\\n\\n  &[data-size='full'] {\\n    width: 100%;\\n  }\\n\\n  &:disabled {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\"])));\nvar templateObject_1;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport styled from 'styled-components';\nimport React from 'react';\nexport var StyledPopover = styled.aside(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  bottom: 100%;\\n  left: 0;\\n  background: black;\\n  color: white;\\n  border-radius: var(--radius);\\n  pointer-events: none;\\n  opacity: 0;\\n\"], [\"\\n  position: absolute;\\n  bottom: 100%;\\n  left: 0;\\n  background: black;\\n  color: white;\\n  border-radius: var(--radius);\\n  pointer-events: none;\\n  opacity: 0;\\n\"])));\nexport var Popover = function (_a) {\n    var children = _a.children;\n    return React.createElement(StyledPopover, null, children);\n};\nvar templateObject_1;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { actionTypes } from 'xstate/lib/actions';\nimport styled from 'styled-components';\nimport { Popover, StyledPopover } from './Popover';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\n// @ts-ignore\nimport { monokai } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nvar Code = function (_a) {\n    var children = _a.children;\n    return (React.createElement(SyntaxHighlighter, { language: \"ts\", style: monokai, customStyle: { margin: 0 } }, children));\n};\nvar StyledStateChartAction = styled.li(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: baseline;\\n  max-width: 30ch;\\n  padding: 0 0.25rem;\\n  line-height: 1rem;\\n\\n  &:hover > \", \" {\\n    opacity: 1;\\n  }\\n\\n  &:before {\\n    font-weight: bold;\\n    color: var(--color-gray);\\n    margin-right: 0.25rem;\\n    font-size: 75%;\\n    content: attr(data-action-type) ' /';\\n    white-space: nowrap;\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: baseline;\\n  max-width: 30ch;\\n  padding: 0 0.25rem;\\n  line-height: 1rem;\\n\\n  &:hover > \", \" {\\n    opacity: 1;\\n  }\\n\\n  &:before {\\n    font-weight: bold;\\n    color: var(--color-gray);\\n    margin-right: 0.25rem;\\n    font-size: 75%;\\n    content: attr(data-action-type) ' /';\\n    white-space: nowrap;\\n  }\\n\"])), StyledPopover);\nvar StyledStateChartActionText = styled.span(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"], [\"\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"])));\nexport var StateChartAction = function (_a) {\n    var action = _a.action, dataAttrs = __rest(_a, [\"action\"]);\n    switch (action.type) {\n        case actionTypes.assign:\n            return typeof action.assignment === 'function' ? (React.createElement(StyledStateChartAction, __assign({}, dataAttrs, { title: \"assign\" }),\n                React.createElement(\"strong\", null, \"assign\"))) : (React.createElement(React.Fragment, null, Object.keys(action.assignment).map(function (key) {\n                return (React.createElement(StyledStateChartAction, __assign({ key: key, title: \"assign \" + key }, dataAttrs),\n                    React.createElement(Popover, null,\n                        React.createElement(Code, null, action.assignment[key].toString())),\n                    React.createElement(StyledStateChartActionText, null,\n                        React.createElement(\"strong\", null, \"assign\"),\n                        \" \",\n                        key)));\n            })));\n        case actionTypes.invoke:\n            return (React.createElement(StyledStateChartAction, __assign({}, dataAttrs, { title: \"invoke \" + action.id }),\n                React.createElement(StyledStateChartActionText, null, action.id)));\n        case actionTypes.send:\n            var sendAction = action;\n            if (sendAction.event.type &&\n                sendAction.event.type.indexOf('xstate.after') === 0) {\n                return null;\n            }\n            return (React.createElement(StyledStateChartAction, __assign({}, dataAttrs, { title: \"send \" + sendAction.event.type + \" to \\\"\" + JSON.stringify(sendAction.to) + \"\\\"\" }),\n                React.createElement(StyledStateChartActionText, null,\n                    React.createElement(\"em\", null, \"send\"),\n                    \" \",\n                    sendAction.event.type,\n                    ' ',\n                    sendAction.to ? \"to \" + JSON.stringify(sendAction.to) : '')));\n        case actionTypes.log:\n            return (React.createElement(StyledStateChartAction, __assign({}, dataAttrs, { title: \"log\" }),\n                React.createElement(StyledStateChartActionText, null,\n                    React.createElement(\"em\", null, \"log\"))));\n        default:\n            if (action.type.indexOf('xstate.') === 0 &&\n                action.type !== 'xstate.invoke') {\n                return null;\n            }\n            return (React.createElement(StyledStateChartAction, __assign({}, dataAttrs, { title: action.type }),\n                React.createElement(StyledStateChartActionText, null, action.type)));\n    }\n};\nvar templateObject_1, templateObject_2;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React from 'react';\nimport styled from 'styled-components';\nvar StyledSCGuard = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 0 0.5rem;\\n\"], [\"\\n  padding: 0 0.5rem;\\n\"])));\nexport var StateChartGuard = function (_a) {\n    var guard = _a.guard, state = _a.state;\n    var valid = guard.predicate && typeof guard.predicate === 'function'\n        ? guard.predicate(state.context, state.event, { cond: guard })\n        : undefined;\n    return (React.createElement(StyledSCGuard, { style: {\n            color: valid === undefined\n                ? 'var(--color-gray)'\n                : valid\n                    ? 'var(--color-success)'\n                    : 'var(--color-failure)'\n        } },\n        \"[\",\n        guard.type === 'xstate.guard' ? guard.name : guard.type,\n        \"]\"));\n};\nvar templateObject_1;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { serializeEdge, stateActions, getEventDelay } from './utils';\nimport { EventName } from './EventName';\nimport { tracker } from './tracker';\nimport { getEdges } from 'xstate/lib/graph';\nimport { StyledButton } from './Button';\nimport { StateChartAction } from './StateChartAction';\nimport { StateChartGuard } from './StateChartGuard';\nvar StyledChildStates = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 1rem;\\n  border-top: 1px solid var(--color-border);\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: wrap;\\n  align-items: flex-start;\\n  min-height: 1rem;\\n\"], [\"\\n  padding: 1rem;\\n  border-top: 1px solid var(--color-border);\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: wrap;\\n  align-items: flex-start;\\n  min-height: 1rem;\\n\"])));\nvar StyledChildStatesToggle = styled.button(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  appearance: none;\\n  display: inline-flex;\\n  height: 1rem;\\n  width: 1rem;\\n  justify-content: center;\\n  align-items: center;\\n  background: transparent;\\n  border: none;\\n  padding: 0;\\n  cursor: pointer;\\n\\n  &:not(:hover) {\\n    opacity: 0.5;\\n  }\\n\\n  &:before {\\n    --dot-size: 3px;\\n    content: '';\\n    display: block;\\n    height: var(--dot-size);\\n    width: var(--dot-size);\\n    border-radius: 50%;\\n    background: var(--toggle-color, gray);\\n    flex-shrink: 0;\\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\"], [\"\\n  appearance: none;\\n  display: inline-flex;\\n  height: 1rem;\\n  width: 1rem;\\n  justify-content: center;\\n  align-items: center;\\n  background: transparent;\\n  border: none;\\n  padding: 0;\\n  cursor: pointer;\\n\\n  &:not(:hover) {\\n    opacity: 0.5;\\n  }\\n\\n  &:before {\\n    --dot-size: 3px;\\n    content: '';\\n    display: block;\\n    height: var(--dot-size);\\n    width: var(--dot-size);\\n    border-radius: 50%;\\n    background: var(--toggle-color, gray);\\n    flex-shrink: 0;\\n    box-shadow: calc(-1 * (var(--dot-size) + 1px)) 0 var(--toggle-color, gray),\\n      calc(var(--dot-size) + 1px) 0 var(--toggle-color, gray);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));\nvar StyledToken = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background: var(--color-border);\\n  color: inherit;\\n  font-weight: bold;\\n\"], [\"\\n  background: var(--color-border);\\n  color: inherit;\\n  font-weight: bold;\\n\"])));\nvar StyledStateNodeHeader = styled.header(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  z-index: 1;\\n  display: flex;\\n  flex-direction: row;\\n  white-space: nowrap;\\n  // position: sticky;\\n  // top: calc(var(--depth, 0) * 1rem);\\n  // background: rgba(255, 255, 255, 0.5);\\n\\n  > * {\\n    padding: 0.25rem;\\n  }\\n\\n  &:before {\\n    display: none;\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    height: 100%;\\n    width: 100%;\\n    background: var(--color-app-background);\\n  }\\n\\n  &[data-type-symbol='history' i] {\\n    --symbol-color: orange;\\n  }\\n\\n  &[data-type-symbol] {\\n    padding-right: 5em;\\n\\n    &:after {\\n      content: attr(data-type-symbol);\\n      position: absolute;\\n      top: 0;\\n      right: 0;\\n      border-bottom-left-radius: 0.25rem;\\n      background: var(--symbol-color, gray);\\n      color: white;\\n      padding: 0.25rem 0.5rem;\\n      font-weight: bold;\\n      font-size: 0.75em;\\n    }\\n  }\\n\"], [\"\\n  z-index: 1;\\n  display: flex;\\n  flex-direction: row;\\n  white-space: nowrap;\\n  // position: sticky;\\n  // top: calc(var(--depth, 0) * 1rem);\\n  // background: rgba(255, 255, 255, 0.5);\\n\\n  > * {\\n    padding: 0.25rem;\\n  }\\n\\n  &:before {\\n    display: none;\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    height: 100%;\\n    width: 100%;\\n    background: var(--color-app-background);\\n  }\\n\\n  &[data-type-symbol='history' i] {\\n    --symbol-color: orange;\\n  }\\n\\n  &[data-type-symbol] {\\n    padding-right: 5em;\\n\\n    &:after {\\n      content: attr(data-type-symbol);\\n      position: absolute;\\n      top: 0;\\n      right: 0;\\n      border-bottom-left-radius: 0.25rem;\\n      background: var(--symbol-color, gray);\\n      color: white;\\n      padding: 0.25rem 0.5rem;\\n      font-weight: bold;\\n      font-size: 0.75em;\\n    }\\n  }\\n\"])));\nvar StyledStateNode = styled.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  --color-shadow: rgba(0, 0, 0, 0.05);\\n  --color-node-border: var(--color-border);\\n  --state-event-gap: 0.5rem;\\n  position: relative;\\n  margin: 0.5rem;\\n  flex-grow: 0;\\n  flex-shrink: 1;\\n  // background: rgba(255, 255, 255, 0.5);\\n  color: #313131;\\n  min-height: 1rem;\\n  display: inline-grid;\\n  grid-template-columns: min-content auto;\\n  grid-column-gap: var(--state-event-gap);\\n  border: none;\\n\\n  &[data-type~='machine'] {\\n    display: grid;\\n    border: none;\\n    box-shadow: none;\\n    width: 100%;\\n    background: none;\\n    margin: 2rem 0;\\n    grid-template-columns: auto 1fr;\\n\\n    > \", \" {\\n      left: 1rem;\\n      font-size: 1rem;\\n    }\\n\\n    > ul {\\n      padding-right: 1.5rem;\\n    }\\n  }\\n  &:not([data-type~='machine']) {\\n    // opacity: 0.75;\\n  }\\n\\n  &:not([data-open='true']) \", \" > * {\\n    display: none;\\n  }\\n\\n  \", \" {\\n    position: absolute;\\n    bottom: 0;\\n    right: 0;\\n  }\\n\\n  &[data-type~='machine'] > \", \" {\\n    display: none;\\n  }\\n\\n  &[data-active] {\\n    --color-node-border: var(--color-primary);\\n    --color-shadow: var(--color-primary-shadow);\\n    opacity: 1;\\n\\n    > \", \" {\\n      color: var(--color-primary);\\n    }\\n\\n    > \", \" {\\n      --toggle-color: var(--color-primary);\\n    }\\n  }\\n\\n  &[data-preview]:not([data-active]) {\\n    --color-node-border: var(--color-primary-faded);\\n  }\\n\\n  &[data-type~='parallel'] {\\n    grid-template-columns: auto 1fr;\\n  }\\n\\n  &[data-type~='final'] {\\n    > div:first-child:after {\\n      content: '';\\n      position: absolute;\\n      top: -5px;\\n      left: -5px;\\n      width: calc(100% + 10px);\\n      height: calc(100% + 10px);\\n      border: 2px solid var(--color-node-border);\\n      pointer-events: none;\\n      border-radius: 6px;\\n      z-index: 1;\\n    }\\n  }\\n\\n  &:before {\\n    content: attr(data-key);\\n    color: transparent;\\n    visibility: hidden;\\n    height: 1px;\\n    display: block;\\n  }\\n\\n  &:hover {\\n    z-index: 2;\\n  }\\n\"], [\"\\n  --color-shadow: rgba(0, 0, 0, 0.05);\\n  --color-node-border: var(--color-border);\\n  --state-event-gap: 0.5rem;\\n  position: relative;\\n  margin: 0.5rem;\\n  flex-grow: 0;\\n  flex-shrink: 1;\\n  // background: rgba(255, 255, 255, 0.5);\\n  color: #313131;\\n  min-height: 1rem;\\n  display: inline-grid;\\n  grid-template-columns: min-content auto;\\n  grid-column-gap: var(--state-event-gap);\\n  border: none;\\n\\n  &[data-type~='machine'] {\\n    display: grid;\\n    border: none;\\n    box-shadow: none;\\n    width: 100%;\\n    background: none;\\n    margin: 2rem 0;\\n    grid-template-columns: auto 1fr;\\n\\n    > \", \" {\\n      left: 1rem;\\n      font-size: 1rem;\\n    }\\n\\n    > ul {\\n      padding-right: 1.5rem;\\n    }\\n  }\\n  &:not([data-type~='machine']) {\\n    // opacity: 0.75;\\n  }\\n\\n  &:not([data-open='true']) \", \" > * {\\n    display: none;\\n  }\\n\\n  \", \" {\\n    position: absolute;\\n    bottom: 0;\\n    right: 0;\\n  }\\n\\n  &[data-type~='machine'] > \", \" {\\n    display: none;\\n  }\\n\\n  &[data-active] {\\n    --color-node-border: var(--color-primary);\\n    --color-shadow: var(--color-primary-shadow);\\n    opacity: 1;\\n\\n    > \", \" {\\n      color: var(--color-primary);\\n    }\\n\\n    > \", \" {\\n      --toggle-color: var(--color-primary);\\n    }\\n  }\\n\\n  &[data-preview]:not([data-active]) {\\n    --color-node-border: var(--color-primary-faded);\\n  }\\n\\n  &[data-type~='parallel'] {\\n    grid-template-columns: auto 1fr;\\n  }\\n\\n  &[data-type~='final'] {\\n    > div:first-child:after {\\n      content: '';\\n      position: absolute;\\n      top: -5px;\\n      left: -5px;\\n      width: calc(100% + 10px);\\n      height: calc(100% + 10px);\\n      border: 2px solid var(--color-node-border);\\n      pointer-events: none;\\n      border-radius: 6px;\\n      z-index: 1;\\n    }\\n  }\\n\\n  &:before {\\n    content: attr(data-key);\\n    color: transparent;\\n    visibility: hidden;\\n    height: 1px;\\n    display: block;\\n  }\\n\\n  &:hover {\\n    z-index: 2;\\n  }\\n\"])), StyledStateNodeHeader, StyledChildStates, StyledChildStatesToggle, StyledChildStatesToggle, StyledStateNodeHeader, StyledChildStatesToggle);\nvar StyledStateNodeState = styled.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  grid-column: 1 / 2;\\n  align-self: self-start;\\n  border-radius: 0.25rem;\\n  border: 2px solid var(--color-node-border);\\n  text-align: left;\\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\\n  color: #313131;\\n  min-height: 1rem;\\n  z-index: 1;\\n  transition: border-color var(--duration) var(--easing);\\n\\n  &[data-type~='parallel'] > \", \" > \", \" > & {\\n    border-style: dashed;\\n  }\\n\"], [\"\\n  grid-column: 1 / 2;\\n  align-self: self-start;\\n  border-radius: 0.25rem;\\n  border: 2px solid var(--color-node-border);\\n  text-align: left;\\n  box-shadow: 0 0.5rem 1rem var(--color-shadow);\\n  color: #313131;\\n  min-height: 1rem;\\n  z-index: 1;\\n  transition: border-color var(--duration) var(--easing);\\n\\n  &[data-type~='parallel'] > \", \" > \", \" > & {\\n    border-style: dashed;\\n  }\\n\"])), StyledChildStates, StyledStateNode);\nvar StyledStateNodeEvents = styled.div(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  grid-column: 2 / 3;\\n  padding: 0;\\n  margin-right: 1rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"], [\"\\n  grid-column: 2 / 3;\\n  padding: 0;\\n  margin-right: 1rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"])));\nexport var StyledStateNodeActions = styled.ul(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n  margin-bottom: 0.5rem;\\n  z-index: 1;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"], [\"\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n  margin-bottom: 0.5rem;\\n  z-index: 1;\\n\\n  &:empty {\\n    display: none;\\n  }\\n\"])));\nvar StyledEventDot = styled.div(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  --size: 0.5rem;\\n  position: relative;\\n  display: inline-block;\\n  height: var(--size);\\n  width: var(--size);\\n  border-radius: 50%;\\n  background-color: white;\\n\\n  &:before {\\n    content: '';\\n    position: absolute;\\n    top: -0.25rem;\\n    right: 0;\\n    width: calc(100% + 0.5rem);\\n    height: calc(100% + 0.5rem);\\n    border-radius: inherit;\\n    background-color: var(--color-event);\\n  }\\n\\n  &:after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    right: 0.25rem;\\n    width: 100%;\\n    height: 100%;\\n    border-radius: inherit;\\n    background-color: white;\\n  }\\n\"], [\"\\n  --size: 0.5rem;\\n  position: relative;\\n  display: inline-block;\\n  height: var(--size);\\n  width: var(--size);\\n  border-radius: 50%;\\n  background-color: white;\\n\\n  &:before {\\n    content: '';\\n    position: absolute;\\n    top: -0.25rem;\\n    right: 0;\\n    width: calc(100% + 0.5rem);\\n    height: calc(100% + 0.5rem);\\n    border-radius: inherit;\\n    background-color: var(--color-event);\\n  }\\n\\n  &:after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    right: 0.25rem;\\n    width: 100%;\\n    height: 100%;\\n    border-radius: inherit;\\n    background-color: white;\\n  }\\n\"])));\nvar StyledEventButtonLabel = styled.label(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n  white-space: nowrap;\\n\"], [\"\\n  white-space: nowrap;\\n\"])));\nvar StyledEventButton = styled.button(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n  --color-event: var(--color-primary);\\n  padding: 0;\\n  position: relative;\\n  appearance: none;\\n  border: 2px solid var(--color-event);\\n  background: white;\\n  color: white;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n  cursor: pointer;\\n  border-radius: 2rem;\\n  line-height: 1;\\n  display: inline-flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  overflow: hidden;\\n\\n  > * {\\n    padding: 0.15rem 0.35rem;\\n  }\\n\\n  > label {\\n    background-color: var(--color-event);\\n    cursor: inherit;\\n    text-align: left;\\n    transition: background var(--duration) var(--easing);\\n\\n    &:empty {\\n      display: none;\\n    }\\n\\n    &:first-child:last-child {\\n      width: 100%;\\n    }\\n  }\\n\\n  &:not(:disabled):not([data-builtin]):hover {\\n    --color-event: var(--color-primary);\\n  }\\n\\n  &:disabled {\\n    cursor: not-allowed;\\n    --color-event: var(--color-disabled);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  // duration\\n  &[data-delay] {\\n    > * {\\n      background: none;\\n    }\\n\\n    &:not([disabled]):before {\\n      content: '';\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: var(--color-event);\\n      animation: move-left calc(var(--delay) * 1ms) linear;\\n      z-index: 0;\\n      opacity: 0.5;\\n    }\\n  }\\n\\n  @keyframes move-left {\\n    from {\\n      transform: translateX(-100%);\\n    }\\n    to {\\n      transform: none;\\n    }\\n  }\\n\\n  &[data-builtin] {\\n    color: black;\\n    font-style: italic;\\n  }\\n\\n  &[data-transient] {\\n    > \", \" {\\n      order: -1;\\n    }\\n  }\\n\"], [\"\\n  --color-event: var(--color-primary);\\n  padding: 0;\\n  position: relative;\\n  appearance: none;\\n  border: 2px solid var(--color-event);\\n  background: white;\\n  color: white;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n  cursor: pointer;\\n  border-radius: 2rem;\\n  line-height: 1;\\n  display: inline-flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  overflow: hidden;\\n\\n  > * {\\n    padding: 0.15rem 0.35rem;\\n  }\\n\\n  > label {\\n    background-color: var(--color-event);\\n    cursor: inherit;\\n    text-align: left;\\n    transition: background var(--duration) var(--easing);\\n\\n    &:empty {\\n      display: none;\\n    }\\n\\n    &:first-child:last-child {\\n      width: 100%;\\n    }\\n  }\\n\\n  &:not(:disabled):not([data-builtin]):hover {\\n    --color-event: var(--color-primary);\\n  }\\n\\n  &:disabled {\\n    cursor: not-allowed;\\n    --color-event: var(--color-disabled);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  // duration\\n  &[data-delay] {\\n    > * {\\n      background: none;\\n    }\\n\\n    &:not([disabled]):before {\\n      content: '';\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: var(--color-event);\\n      animation: move-left calc(var(--delay) * 1ms) linear;\\n      z-index: 0;\\n      opacity: 0.5;\\n    }\\n  }\\n\\n  @keyframes move-left {\\n    from {\\n      transform: translateX(-100%);\\n    }\\n    to {\\n      transform: none;\\n    }\\n  }\\n\\n  &[data-builtin] {\\n    color: black;\\n    font-style: italic;\\n  }\\n\\n  &[data-transient] {\\n    > \", \" {\\n      order: -1;\\n    }\\n  }\\n\"])), StyledEventDot);\nvar StyledEvent = styled.div(templateObject_12 || (templateObject_12 = __makeTemplateObject([\"\\n  list-style: none;\\n  margin: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n\\n  &:not(:last-child) {\\n    margin-bottom: 0.25rem;\\n  }\\n\\n  &[data-disabled] > \", \" {\\n    opacity: 0.7;\\n  }\\n\\n  &[data-internal] {\\n  }\\n\"], [\"\\n  list-style: none;\\n  margin: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n\\n  &:not(:last-child) {\\n    margin-bottom: 0.25rem;\\n  }\\n\\n  &[data-disabled] > \", \" {\\n    opacity: 0.7;\\n  }\\n\\n  &[data-internal] {\\n  }\\n\"])), StyledStateNodeActions);\nvar StyledStateNodeAction = styled.div(templateObject_13 || (templateObject_13 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n\\n  &:before {\\n    content: '\\u2192';\\n    margin-right: 0.5ch;\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n\\n  &:before {\\n    content: '\\u2192';\\n    margin-right: 0.5ch;\\n  }\\n\"])));\nvar StyledActiveAnim = styled.div(templateObject_14 || (templateObject_14 = __makeTemplateObject([\"\\n  position: absolute;\\n  z-index: 0;\\n  height: 100%;\\n  width: 100%;\\n  top: 0;\\n  left: 0;\\n  animation: bg 1s both;\\n  background: var(--color-primary);\\n  will-change: opacity;\\n\\n  @keyframes bg {\\n    from {\\n      opacity: 0.5;\\n    }\\n    to {\\n      opacity: 0;\\n    }\\n  }\\n\"], [\"\\n  position: absolute;\\n  z-index: 0;\\n  height: 100%;\\n  width: 100%;\\n  top: 0;\\n  left: 0;\\n  animation: bg 1s both;\\n  background: var(--color-primary);\\n  will-change: opacity;\\n\\n  @keyframes bg {\\n    from {\\n      opacity: 0.5;\\n    }\\n    to {\\n      opacity: 0;\\n    }\\n  }\\n\"])));\nexport var StateChartNode = function (props) {\n    // get toggled value from localStorage\n    var toggledValue = localStorage.getItem(props.stateNode.id + \"_toggled\");\n    var toggled = toggledValue === null || toggledValue === '1';\n    var _a = useState(toggled), toggledState = _a[0], setToggledState = _a[1];\n    var stateRef = useRef();\n    useEffect(function () {\n        tracker.update(props.stateNode.id, stateRef.current);\n    });\n    useEffect(function () {\n        tracker.updateAll();\n    }, [toggledState]);\n    var _b = useState(0), timerRestarts = _b[0], setTimerRestarts = _b[1];\n    var stateNode = props.stateNode, current = props.current, preview = props.preview, onEvent = props.onEvent, onPreEvent = props.onPreEvent, onExitPreEvent = props.onExitPreEvent, onReset = props.onReset, transitionCount = props.transitionCount;\n    useEffect(function () {\n        if (current.actions.some(function (action) {\n            return (action.type === 'xstate.cancel' &&\n                action.sendId.indexOf(stateNode.id) > 0);\n        })) {\n            setTimerRestarts(timerRestarts + 1);\n        }\n    }, [current]);\n    var isActive = !stateNode.parent || current.matches(stateNode.path.join('.')) || undefined;\n    var isPreview = preview\n        ? preview.matches(stateNode.path.join('.')) || undefined\n        : undefined;\n    var dataType = stateNode.parent\n        ? stateNode.type\n        : \"machine \" + stateNode.type;\n    return (React.createElement(StyledStateNode, { key: stateNode.id, \"data-key\": stateNode.key, \"data-type\": dataType, \"data-active\": isActive && stateNode.parent, \"data-preview\": isPreview && stateNode.parent, \"data-open\": toggledState || undefined, ref: stateRef },\n        React.createElement(StyledStateNodeState, { \"data-id\": stateNode.id, \"data-type\": dataType },\n            isActive && (dataType === 'atomic' || dataType === 'final') && (React.createElement(StyledActiveAnim, { key: transitionCount, style: {\n                    // @ts-ignore\n                    '--level': props.level\n                } })),\n            React.createElement(StyledStateNodeHeader, { style: {\n                    // @ts-ignore\n                    '--depth': stateNode.path.length\n                } },\n                dataType === 'history' && React.createElement(StyledToken, null, \"H\"),\n                React.createElement(\"strong\", { title: \"#\" + stateNode.id }, stateNode.key),\n                stateNode.path.length === 0 ? (React.createElement(StyledButton, { \"data-variant\": \"link\", onClick: onReset ? function () { return onReset(); } : undefined, title: \"Reset machine to its initial state\" }, \"Reset\")) : null),\n            !!stateActions(stateNode).length && (React.createElement(React.Fragment, null,\n                React.createElement(StyledStateNodeActions, null, stateNode.definition.onEntry.map(function (action) {\n                    var actionString = action.type;\n                    return (React.createElement(StateChartAction, { key: actionString, \"data-action-type\": \"entry\", action: action }));\n                })),\n                React.createElement(StyledStateNodeActions, null, stateNode.definition.onExit.map(function (action) {\n                    var actionString = action.type;\n                    return (React.createElement(StateChartAction, { key: actionString, \"data-action-type\": \"exit\", action: action }));\n                })))),\n            React.createElement(StyledStateNodeActions, { \"data-title\": \"invoke\" }, stateNode.invoke.map(function (invocation) {\n                return (React.createElement(StateChartAction, { key: invocation.id, \"data-action-type\": \"invoke\", action: invocation }, invocation.id));\n            })),\n            Object.keys(stateNode.states).length ? (React.createElement(StyledChildStates, null, Object.keys(stateNode.states || []).map(function (key) {\n                var childStateNode = stateNode.states[key];\n                return (React.createElement(StateChartNode, { stateNode: childStateNode, level: props.level + 1, current: current, preview: preview, key: childStateNode.id, onEvent: onEvent, onPreEvent: onPreEvent, onExitPreEvent: onExitPreEvent, toggledStates: props.toggledStates, onSelectServiceId: props.onSelectServiceId, transitionCount: props.transitionCount }));\n            }))) : null,\n            Object.keys(stateNode.states).length > 0 ? (React.createElement(StyledChildStatesToggle, { title: toggledState ? 'Hide children' : 'Show children', onClick: function (e) {\n                    e.stopPropagation();\n                    // remember toggled value\n                    var toggled = !toggledState;\n                    localStorage.setItem(stateNode.id + \"_toggled\", toggled ? '1' : '');\n                    setToggledState(toggled);\n                } })) : null),\n        React.createElement(StyledStateNodeEvents, null, getEdges(stateNode, { depth: 0 }).map(function (edge) {\n            var ownEvent = edge.event;\n            var isBuiltInEvent = ownEvent.indexOf('xstate.') === 0;\n            var guard = edge.transition.cond;\n            var valid = guard && guard.predicate\n                ? guard.predicate(current.context, current.event, {\n                    cond: guard\n                })\n                : true;\n            var disabled = !valid || !isActive || current.nextEvents.indexOf(ownEvent) === -1;\n            // || (!!edge.cond &&\n            //   typeof edge.cond === 'function' &&\n            //   !edge.cond(current.context, { type: ownEvent }, { cond: undefined, }));\n            var delay = isBuiltInEvent ? getEventDelay(ownEvent) : false;\n            if (typeof delay === 'string') {\n                var delayExpr = stateNode.machine.options.delays[delay];\n                delay =\n                    typeof delayExpr === 'number'\n                        ? delayExpr\n                        : delayExpr(current.context, current.event);\n            }\n            var isTransient = ownEvent === '';\n            return (React.createElement(StyledEvent, { style: {\n                    //@ts-ignore\n                    '--delay': delay || 0\n                }, \"data-disabled\": disabled || undefined, key: serializeEdge(edge), \"data-internal\": edge.transition.internal || undefined },\n                React.createElement(StyledEventButton, { onClick: function () {\n                        return !isBuiltInEvent ? onEvent(ownEvent) : undefined;\n                    }, onMouseOver: function () { return onPreEvent(ownEvent); }, onMouseOut: function () { return onExitPreEvent(); }, disabled: disabled, \"data-delay\": edge.transition\n                        .delay, key: timerRestarts, \"data-builtin\": isBuiltInEvent || undefined, \"data-transient\": isTransient || undefined, \"data-id\": serializeEdge(edge), title: ownEvent },\n                    React.createElement(StyledEventButtonLabel, null,\n                        React.createElement(EventName, { event: ownEvent })),\n                    edge.transition.cond && (React.createElement(StateChartGuard, { guard: edge.transition.cond, state: current }))),\n                !!(edge.transition.actions.length || edge.transition.cond) && (React.createElement(StyledStateNodeActions, null, edge.transition.actions.map(function (action, i) {\n                    return (React.createElement(StateChartAction, { key: i, action: action, \"data-action-type\": \"do\" }));\n                })))));\n        }))));\n};\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { getEdges } from 'xstate/lib/graph';\nimport { serializeEdge, initialStateNodes } from './utils';\nimport { Edge } from './Edge';\nimport { InitialEdge } from './InitialEdge';\nimport { StateChartNode } from './StateChartNode';\nimport { useService } from '@xstate/react';\nvar StyledVisualization = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: relative;\\n  max-height: inherit;\\n  overflow-y: auto;\\n\"], [\"\\n  position: relative;\\n  max-height: inherit;\\n  overflow-y: auto;\\n\"])));\nexport var StateChartVisualization = function (_a) {\n    var service = _a.service, visible = _a.visible, onSelectService = _a.onSelectService, onReset = _a.onReset;\n    var _b = useState(0), transitionCount = _b[0], setTransitionCount = _b[1];\n    var _c = useService(service), current = _c[0], send = _c[1];\n    var _d = React.useState({\n        toggledStates: {},\n        previewEvent: undefined,\n        preview: undefined\n    }), state = _d[0], setState = _d[1];\n    var svgRef = React.useRef(null);\n    var edges;\n    try {\n        edges = getEdges(service.machine);\n    }\n    catch (err) {\n        edges = null;\n        console.error(err);\n    }\n    useEffect(function () {\n        setTransitionCount(transitionCount + 1);\n    }, [current]);\n    if (!visible || !edges) {\n        return null;\n    }\n    return (React.createElement(StyledVisualization, null,\n        React.createElement(\"svg\", { width: \"100%\", height: \"100%\", style: {\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                // @ts-ignore\n                '--color': 'gray',\n                overflow: 'visible',\n                pointerEvents: 'none'\n            }, ref: svgRef, key: JSON.stringify(state.toggledStates) },\n            React.createElement(\"defs\", null,\n                React.createElement(\"marker\", { id: \"marker\", markerWidth: \"4\", markerHeight: \"4\", refX: \"2\", refY: \"2\", markerUnits: \"strokeWidth\", orient: \"auto\" },\n                    React.createElement(\"path\", { d: \"M0,0 L0,4 L4,2 z\", fill: \"var(--color-edge)\" })),\n                React.createElement(\"marker\", { id: \"marker-preview\", markerWidth: \"4\", markerHeight: \"4\", refX: \"2\", refY: \"2\", markerUnits: \"strokeWidth\", orient: \"auto\" },\n                    React.createElement(\"path\", { d: \"M0,0 L0,4 L4,2 z\", fill: \"var(--color-edge-active)\" }))),\n            edges.map(function (edge) {\n                if (!svgRef.current) {\n                    return;\n                }\n                // const svgRect = this.svgRef.current.getBoundingClientRect();\n                return (React.createElement(Edge, { key: serializeEdge(edge), svg: svgRef.current, edge: edge, preview: edge.event === state.previewEvent &&\n                        current.matches(edge.source.path.join('.')) &&\n                        !!state.preview &&\n                        state.preview.matches(edge.target.path.join('.')) }));\n            }),\n            initialStateNodes(service.machine).map(function (initialStateNode, i) {\n                if (!svgRef.current) {\n                    return;\n                }\n                return (React.createElement(InitialEdge, { key: initialStateNode.id + \"_\" + i, source: initialStateNode, svgRef: svgRef.current, preview: current.matches(initialStateNode.path.join('.')) ||\n                        (!!state.preview &&\n                            state.preview.matches(initialStateNode.path.join('.'))) }));\n            })),\n        React.createElement(StateChartNode, { stateNode: service.machine, current: service.state, transitionCount: transitionCount, level: 0, preview: state.preview, onReset: onReset, onEvent: function (event) {\n                send(event);\n            }, onPreEvent: function (event) {\n                if (!state.preview) {\n                    setState(__assign(__assign({}, state), { preview: service.nextState(event), previewEvent: event }));\n                }\n            }, onExitPreEvent: function () {\n                setState(__assign(__assign({}, state), { preview: undefined, previewEvent: undefined }));\n            }, onSelectServiceId: function (serviceId) {\n                var s = service.children.get(serviceId);\n                if (s) {\n                    onSelectService(s); // TODO: pass service via context\n                }\n            }, toggledStates: state.toggledStates })));\n};\nvar templateObject_1;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React from 'react';\nimport { StateChartVisualization } from './StateChartVisualization';\nimport styled from 'styled-components';\nexport var StyledStateChartContainer = styled.section(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-column-gap: 1rem;\\n  grid-row-gap: 1rem;\\n  padding: 0 1rem;\\n\\n  &[data-child] {\\n    grid-template-columns: 1fr 1fr;\\n  }\\n\"], [\"\\n  display: grid;\\n  grid-column-gap: 1rem;\\n  grid-row-gap: 1rem;\\n  padding: 0 1rem;\\n\\n  &[data-child] {\\n    grid-template-columns: 1fr 1fr;\\n  }\\n\"])));\nexport var StateChartContainer = function (_a) {\n    var service = _a.service, onReset = _a.onReset;\n    return (React.createElement(StyledStateChartContainer, null,\n        React.createElement(StateChartVisualization, { service: service, visible: true, onSelectService: function () { return void 0; }, onReset: onReset })));\n};\nvar templateObject_1;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React from 'react';\nimport { tracker } from './tracker';\nimport { relative } from './utils';\nvar InitialEdge = /** @class */ (function (_super) {\n    __extends(InitialEdge, _super);\n    function InitialEdge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            sourceElement: undefined\n        };\n        return _this;\n    }\n    InitialEdge.prototype.componentDidMount = function () {\n        var _this = this;\n        var id = this.props.source.id;\n        tracker.listen(id, function (data) {\n            _this.setState({ sourceElement: data.element });\n        });\n    };\n    InitialEdge.prototype.render = function () {\n        var _a = this.props, svgRef = _a.svgRef, preview = _a.preview;\n        if (!this.state.sourceElement) {\n            return null;\n        }\n        var rect = relative(this.state.sourceElement.getBoundingClientRect(), svgRef);\n        var top = rect.top, left = rect.left;\n        var stroke = preview ? 'var(--color-edge-active)' : 'var(--color-edge)';\n        return (React.createElement(\"g\", null,\n            React.createElement(\"circle\", { r: \"4\", cx: left - 10, cy: top, fill: stroke }),\n            React.createElement(\"path\", { d: \"M \" + (left - 10) + \",\" + top + \" Q \" + (left - 10) + \",\" + (top + 10) + \" \" + (left -\n                    1) + \",\" + (top + 10) + \" L \" + left + \",\" + (top + 10), stroke: stroke, strokeWidth: \"2\", fill: \"none\", markerEnd: preview ? \"url(#marker-preview)\" : \"url(#marker)\" })));\n    };\n    return InitialEdge;\n}(React.Component));\nexport { InitialEdge };\n","import React from 'react';\nimport { DELAY_EVENT_REGEX } from './utils';\nexport var EventName = function (_a) {\n    var event = _a.event;\n    var match = event.match(DELAY_EVENT_REGEX);\n    if (match) {\n        var isMs = Number.isFinite(+match[1]);\n        return (React.createElement(\"span\", null,\n            React.createElement(\"em\", null, \"after\"),\n            \" \",\n            match[1],\n            isMs ? 'ms' : ''));\n    }\n    match = event.match(/^done\\.state/);\n    if (match) {\n        return (React.createElement(\"span\", null,\n            React.createElement(\"em\", null, \"done\")));\n    }\n    match = event.match(/^done\\.invoke\\.(.+)/);\n    if (match) {\n        return (React.createElement(\"span\", null,\n            React.createElement(\"em\", null, \"done\"),\n            \" (\",\n            match[1],\n            \")\"));\n    }\n    match = event.match(/^error\\.platform\\.(.+)/);\n    if (match) {\n        return (React.createElement(\"span\", null,\n            React.createElement(\"em\", null, \"error\"),\n            \" (\",\n            match[1],\n            \")\"));\n    }\n    return React.createElement(\"span\", null, event);\n};\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport styled from 'styled-components';\nvar StyledField = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  &:not(:last-child) {\\n    margin-bottom: 1rem;\\n  }\\n\\n  margin-top: 0.5rem;\\n  width: 100%;\\n  overflow: hidden;\\n\\n  > label {\\n    text-transform: uppercase;\\n    display: block;\\n    margin-bottom: 0.5em;\\n    font-weight: bold;\\n    opacity: 0.5;\\n  }\\n\\n  &[data-empty] {\\n    opacity: 0.5;\\n    > label {\\n      margin-bottom: 0;\\n    }\\n  }\\n\"], [\"\\n  &:not(:last-child) {\\n    margin-bottom: 1rem;\\n  }\\n\\n  margin-top: 0.5rem;\\n  width: 100%;\\n  overflow: hidden;\\n\\n  > label {\\n    text-transform: uppercase;\\n    display: block;\\n    margin-bottom: 0.5em;\\n    font-weight: bold;\\n    opacity: 0.5;\\n  }\\n\\n  &[data-empty] {\\n    opacity: 0.5;\\n    > label {\\n      margin-bottom: 0;\\n    }\\n  }\\n\"])));\nfunction Field(_a) {\n    var label = _a.label, children = _a.children, disabled = _a.disabled, style = _a.style;\n    return (React.createElement(StyledField, { style: __assign(__assign({}, style), (disabled ? { opacity: 0.5 } : undefined)), \"data-empty\": !children || undefined },\n        React.createElement(\"label\", null, label),\n        children));\n}\nvar StyledDetails = styled.details(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  margin: 0;\\n  padding: 0 1rem;\\n\\n  & & {\\n    border-left: 2px solid #737373;\\n  }\\n\\n  > summary {\\n    font-weight: bold;\\n    font-size: 1rem;\\n  }\\n\"], [\"\\n  margin: 0;\\n  padding: 0 1rem;\\n\\n  & & {\\n    border-left: 2px solid #737373;\\n  }\\n\\n  > summary {\\n    font-weight: bold;\\n    font-size: 1rem;\\n  }\\n\"])));\nvar StyledPanelAction = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-columns: auto 1fr;\\n  grid-column-gap: 1ch;\\n\\n  & + & {\\n    margin-top: 0.5rem;\\n  }\\n\\n  pre {\\n    margin: 0;\\n  }\\n\"], [\"\\n  display: grid;\\n  grid-template-columns: auto 1fr;\\n  grid-column-gap: 1ch;\\n\\n  & + & {\\n    margin-top: 0.5rem;\\n  }\\n\\n  pre {\\n    margin: 0;\\n  }\\n\"])));\nexport var StatePanel = function (_a) {\n    var state = _a.state, service = _a.service;\n    var simplifiedState = {\n        value: state.value,\n        context: state.context\n    };\n    return (React.createElement(StyledDetails, { key: service.id, open: true },\n        React.createElement(\"summary\", null, service.id),\n        React.createElement(Field, { label: \"state\" },\n            React.createElement(\"pre\", null, JSON.stringify(simplifiedState, null, 2))),\n        React.createElement(Field, { label: \"actions\" }, state.actions.map(function (action, i) {\n            return (React.createElement(StyledPanelAction, { key: i }, Object.keys(action).map(function (key) {\n                var value = action[key];\n                if (value === undefined) {\n                    return null;\n                }\n                return (React.createElement(React.Fragment, { key: key },\n                    React.createElement(\"strong\", null,\n                        key,\n                        \":\"),\n                    React.createElement(\"pre\", null, JSON.stringify(action[key], null, 2))));\n            })));\n        })),\n        React.createElement(Field, { label: \"Children\" }, Array.from(service.children.values()).map(function (child, i) {\n            if (!child.state) {\n                return null;\n            }\n            return React.createElement(StatePanel, { state: child.state, service: child, key: i });\n        }))));\n};\nvar templateObject_1, templateObject_2, templateObject_3;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React, { useEffect, useState } from 'react';\nimport { Machine, assign } from 'xstate';\nimport { produce } from 'immer';\nimport { log } from 'xstate/lib/actions';\nimport styled from 'styled-components';\nimport { notificationsActor } from './Header';\nexport var notificationsMachine = Machine({\n    id: 'notifications',\n    context: {\n        notifications: []\n    },\n    initial: 'inactive',\n    states: {\n        inactive: {},\n        active: {\n            entry: log(),\n            on: {\n                'NOTIFICATION.DISMISS': {\n                    actions: assign({\n                        notifications: function (ctx, e) {\n                            return produce(ctx.notifications, function (draft) {\n                                draft.splice(e.index, 1);\n                            });\n                        }\n                    })\n                }\n            }\n        }\n    },\n    on: {\n        'NOTIFICATIONS.QUEUE': {\n            target: '.active',\n            actions: assign({\n                notifications: function (ctx, e) {\n                    return produce(ctx.notifications, function (draft) {\n                        draft.unshift(e.data);\n                    });\n                }\n            })\n        }\n    }\n});\nvar StyledNotificationDismissButton = styled.button(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n\"], [\"\\n  appearance: none;\\n  background: transparent;\\n  color: white;\\n\"])));\nvar StyledNotification = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  padding: 1rem;\\n  margin: 1rem;\\n  border-radius: var(--radius);\\n  border-top: 2px solid currentColor;\\n  border-top-left-radius: 0;\\n  border-top-right-radius: 0;\\n  background: white;\\n  box-shadow: var(--shadow);\\n  animation: notification-slideDown calc(var(--timeout, 4000) * 1ms) ease both;\\n  will-change: transform;\\n  transition: transform var(--duration);\\n  cursor: default;\\n\\n  &[data-severity='success'] {\\n    color: #40d38d;\\n  }\\n\\n  &[data-severity='info'] {\\n    color: #2f86eb;\\n  }\\n\\n  &[data-severity='error'] {\\n    color: #f16462;\\n  }\\n\\n  > \", \" {\\n    position: absolute;\\n    right: 0;\\n  }\\n\\n  @keyframes notification-slideDown {\\n    from {\\n      transform: translateY(-100%);\\n    }\\n    from,\\n    50% {\\n      pointer-events: auto;\\n      opacity: 1;\\n    }\\n    20%,\\n    to {\\n      transform: translateY(calc(var(--index) * 100% + 0.5rem));\\n    }\\n    to {\\n      opacity: 0;\\n      pointer-events: none;\\n    }\\n  }\\n\"], [\"\\n  padding: 1rem;\\n  margin: 1rem;\\n  border-radius: var(--radius);\\n  border-top: 2px solid currentColor;\\n  border-top-left-radius: 0;\\n  border-top-right-radius: 0;\\n  background: white;\\n  box-shadow: var(--shadow);\\n  animation: notification-slideDown calc(var(--timeout, 4000) * 1ms) ease both;\\n  will-change: transform;\\n  transition: transform var(--duration);\\n  cursor: default;\\n\\n  &[data-severity='success'] {\\n    color: #40d38d;\\n  }\\n\\n  &[data-severity='info'] {\\n    color: #2f86eb;\\n  }\\n\\n  &[data-severity='error'] {\\n    color: #f16462;\\n  }\\n\\n  > \", \" {\\n    position: absolute;\\n    right: 0;\\n  }\\n\\n  @keyframes notification-slideDown {\\n    from {\\n      transform: translateY(-100%);\\n    }\\n    from,\\n    50% {\\n      pointer-events: auto;\\n      opacity: 1;\\n    }\\n    20%,\\n    to {\\n      transform: translateY(calc(var(--index) * 100% + 0.5rem));\\n    }\\n    to {\\n      opacity: 0;\\n      pointer-events: none;\\n    }\\n  }\\n\"])), StyledNotificationDismissButton);\nvar StyledNotifications = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: center;\\n  z-index: 10;\\n\\n  > \", \" {\\n    position: absolute;\\n    pointer-events: auto;\\n  }\\n\"], [\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: center;\\n  z-index: 10;\\n\\n  > \", \" {\\n    position: absolute;\\n    pointer-events: auto;\\n  }\\n\"])), StyledNotification);\nvar StyledNotificationDescription = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  color: #111;\\n\"], [\"\\n  color: #111;\\n\"])));\nexport var Notifications = function (_a) {\n    var notifier = _a.notifier;\n    var _b = useState(), current = _b[0], setCurrent = _b[1];\n    useEffect(function () {\n        notifier.subscribe(function (state) {\n            setCurrent(state);\n        });\n    }, []);\n    if (!current) {\n        return null;\n    }\n    var notifications = current.context.notifications;\n    return (React.createElement(StyledNotifications, null, notifications.map(function (notification, i) {\n        return (React.createElement(StyledNotification, { key: notifications.length - i, \"data-severity\": notification.severity, style: {\n                // @ts-ignore\n                '--timeout': 5000,\n                '--index': i\n            }, onClick: function () {\n                return notificationsActor.send({\n                    type: 'NOTIFICATION.DISMISS',\n                    index: i\n                });\n            } },\n            React.createElement(\"strong\", null, notification.message),\n            notification.description && (React.createElement(StyledNotificationDescription, null,\n                React.createElement(\"small\", null,\n                    notification.description,\n                    ' ',\n                    notification.severity === 'error'\n                        ? '(See console for more details)'\n                        : '')))));\n    })));\n};\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React from 'react';\nimport styled from 'styled-components';\nvar StyledLoader = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 1rem;\\n  padding-top: 1.5rem;\\n  margin: auto auto;\\n  transform-style: preserve-3d;\\n  perspective: 100px;\\n  text-align: center;\\n  font-size: 80%;\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:before,\\n  &:after {\\n    content: '';\\n    width: 1rem;\\n    height: 1rem;\\n    top: 0;\\n    left: calc(50% - 0.5rem);\\n    position: absolute;\\n    border: 2px solid rgba(87, 176, 234, 1);\\n    border-radius: 0.2rem;\\n    animation: loader-box 1s infinite both;\\n  }\\n\\n  &:after {\\n    animation-delay: 0.5s;\\n  }\\n\\n  @keyframes loader-box {\\n    from {\\n      transform: rotateY(40deg) translateX(150%);\\n      opacity: 0;\\n    }\\n    50% {\\n      transform: none;\\n      opacity: 1;\\n    }\\n    to {\\n      transform: rotateY(-40deg) translateX(-150%);\\n      opacity: 0;\\n    }\\n  }\\n\"], [\"\\n  padding: 1rem;\\n  padding-top: 1.5rem;\\n  margin: auto auto;\\n  transform-style: preserve-3d;\\n  perspective: 100px;\\n  text-align: center;\\n  font-size: 80%;\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  letter-spacing: 1px;\\n\\n  &:before,\\n  &:after {\\n    content: '';\\n    width: 1rem;\\n    height: 1rem;\\n    top: 0;\\n    left: calc(50% - 0.5rem);\\n    position: absolute;\\n    border: 2px solid rgba(87, 176, 234, 1);\\n    border-radius: 0.2rem;\\n    animation: loader-box 1s infinite both;\\n  }\\n\\n  &:after {\\n    animation-delay: 0.5s;\\n  }\\n\\n  @keyframes loader-box {\\n    from {\\n      transform: rotateY(40deg) translateX(150%);\\n      opacity: 0;\\n    }\\n    50% {\\n      transform: none;\\n      opacity: 1;\\n    }\\n    to {\\n      transform: rotateY(-40deg) translateX(-150%);\\n      opacity: 0;\\n    }\\n  }\\n\"])));\nexport var Loader = function (_a) {\n    var _b = _a.children, children = _b === void 0 ? 'Loading...' : _b;\n    return React.createElement(StyledLoader, null, children);\n};\nvar templateObject_1;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React from 'react';\nimport styled from 'styled-components';\nexport var StyledLayoutButton = styled.button(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  appearance: none;\\n  background: white;\\n  box-shadow: var(--shadow);\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  padding: 0.5rem 1rem;\\n  border-top-left-radius: 1rem;\\n  border-bottom-left-radius: 1rem;\\n  color: black;\\n  border: none;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  cursor: pointer;\\n  z-index: 2;\\n  margin-top: 1rem;\\n  opacity: 0.7;\\n  transition: all var(--duration) var(--easing);\\n  transform: translateX(0.5rem);\\n\\n  &:focus,\\n  &:hover {\\n    outline: none;\\n  }\\n\\n  &:hover {\\n    opacity: 1;\\n    transform: none;\\n  }\\n\\n  [data-layout='viz'] & {\\n    right: 100%;\\n    color: black;\\n  }\\n\"], [\"\\n  appearance: none;\\n  background: white;\\n  box-shadow: var(--shadow);\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  padding: 0.5rem 1rem;\\n  border-top-left-radius: 1rem;\\n  border-bottom-left-radius: 1rem;\\n  color: black;\\n  border: none;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  cursor: pointer;\\n  z-index: 2;\\n  margin-top: 1rem;\\n  opacity: 0.7;\\n  transition: all var(--duration) var(--easing);\\n  transform: translateX(0.5rem);\\n\\n  &:focus,\\n  &:hover {\\n    outline: none;\\n  }\\n\\n  &:hover {\\n    opacity: 1;\\n    transform: none;\\n  }\\n\\n  [data-layout='viz'] & {\\n    right: 100%;\\n    color: black;\\n  }\\n\"])));\nexport var LayoutButton = function (_a) {\n    var onClick = _a.onClick, children = _a.children;\n    return React.createElement(StyledLayoutButton, { onClick: onClick }, children);\n};\nvar templateObject_1;\n","var examples = {\n    omni: \"Machine({\\n    id: 'example',\\n    initial: 'leaf',\\n    states: {\\n      leaf: {\\n        on: {\\n          NEXT: 'compound'\\n        }\\n      },\\n      'another leaf': {\\n        entry: ['one', 'two'],\\n        exit: ['three', 'four'],\\n        on: {\\n          NEXT: {\\n            target: 'compound',\\n            cond: function someCondition() { return true }\\n          },\\n          NEVER: {\\n            target: 'leaf',\\n            cond: function falseCondition() { return false }\\n          }\\n        }\\n      },\\n      compound: {\\n        initial: 'child 1',\\n        states: {\\n          'child 1': {\\n            on: {\\n              NEXT: 'child 2'\\n            }\\n          },\\n          'child 2': {\\n            initial: 'subchild 1',\\n            states: {\\n              'subchild 1': {\\n                on: { NEXT: 'subchild 2' }\\n              },\\n              'subchild 2': {\\n                on: { NEXT: 'subchild 3', PREV: 'subchild 1' }\\n              },\\n              'subchild 3': {\\n                type: 'final'\\n              }\\n            }\\n          }\\n        },\\n        on: {\\n          PREV: 'leaf',\\n          NEXT: 'parallel',\\n          INTERNAL: '.child 1'\\n        }\\n      },\\n      parallel: {\\n        type: 'parallel',\\n        states: {\\n          foo: {},\\n          bar: {\\n            initial: 'one',\\n            states: {\\n              one: {\\n                on: {\\n                  NEXT: 'two'\\n                }\\n              },\\n              two: {\\n                on: {\\n                  NEXT: 'three',\\n                  PREV: 'two'\\n                }\\n              },\\n              three: {\\n                on: {\\n                  SELF: 'three',\\n                  SELF_INTERNAL: '.',\\n                  PREV: 'two',\\n                  CYCLE: 'one'\\n                }\\n              }\\n            }\\n          },\\n          baz: {\\n            initial: 'one',\\n            states: {\\n              one: {\\n                on: {\\n                  TWO_CHILD: 'two.foo'\\n                }\\n              },\\n              two: {\\n                initial: 'foo',\\n                states: {\\n                  foo: {},\\n                  bar: {},\\n                  history: {\\n                    type: 'history'\\n                  }\\n                }\\n              },\\n              three: {}\\n            }\\n          }\\n        }\\n      }\\n    }\\n  })\",\n    basic: \"\\n  // Available variables:\\n  // - Machine\\n  // - interpret\\n  // - assign\\n  // - send\\n  // - sendParent\\n  // - spawn\\n  // - raise\\n  // - actions\\n  // - XState (all XState exports)\\n  \\n  const fetchMachine = Machine({\\n    id: 'fetch',\\n    initial: 'idle',\\n    context: {\\n      retries: 0\\n    },\\n    states: {\\n      idle: {\\n        on: {\\n          FETCH: 'loading'\\n        }\\n      },\\n      loading: {\\n        on: {\\n          RESOLVE: 'success',\\n          REJECT: 'failure'\\n        }\\n      },\\n      success: {\\n        type: 'final'\\n      },\\n      failure: {\\n        on: {\\n          RETRY: {\\n            target: 'loading',\\n            actions: assign({\\n              retries: (context, event) => context.retries + 1\\n            })\\n          }\\n        }\\n      }\\n    }\\n  });\\n  \"\n};\nexport { examples };\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport React, { createContext, useReducer } from 'react';\nimport { StateChart, Notifications } from './index';\nimport styled from 'styled-components';\nimport { Machine, assign } from 'xstate';\nimport queryString from 'query-string';\nimport { useMachine } from '@xstate/react';\nimport { examples } from './examples';\nimport { notificationsActor } from './Header';\nimport { Logo } from './logo';\nimport { Loader } from './Loader';\nimport { LayoutButton, StyledLayoutButton } from './LayoutButton';\nimport { toMachine } from './StateChart';\nexport var StyledHeader = styled.header(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: stretch;\\n  grid-area: header;\\n  padding: 0.5rem 1rem;\\n  z-index: 1;\\n  white-space: nowrap;\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: stretch;\\n  grid-area: header;\\n  padding: 0.5rem 1rem;\\n  z-index: 1;\\n  white-space: nowrap;\\n\"])));\nvar StyledApp = styled.main(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  --color-app-background: #fff;\\n  --color-border: #c9c9c9;\\n  --color-primary: rgba(87, 176, 234, 1);\\n  --color-primary-faded: rgba(87, 176, 234, 0.5);\\n  --color-primary-shadow: rgba(87, 176, 234, 0.1);\\n  --color-link: rgba(87, 176, 234, 1);\\n  --color-disabled: #b3b3b3;\\n  --color-edge: #c9c9c9;\\n  --color-edge-active: var(--color-primary);\\n  --color-secondary: rgba(255, 152, 0, 1);\\n  --color-secondary-light: rgba(255, 152, 0, 0.5);\\n  --color-sidebar: #272722;\\n  --color-gray: #555;\\n  --color-failure: #ee7170;\\n  --color-success: #31ae00;\\n  --radius: 0.2rem;\\n  --border-width: 2px;\\n  --sidebar-width: 25rem;\\n  --shadow: 0 0.5rem 1rem var(--shadow-color, rgba(0, 0, 0, 0.2));\\n  --duration: 0.2s;\\n  --easing: cubic-bezier(0.5, 0, 0.5, 1);\\n\\n  height: 100%;\\n  display: grid;\\n  grid-template-areas:\\n    'header sidebar'\\n    'content content';\\n  grid-template-rows: 3rem auto;\\n  grid-template-columns: auto var(--sidebar-width);\\n  overflow: hidden;\\n\\n  > \", \" {\\n    display: inline-block;\\n    grid-row: 2;\\n    grid-column: -1;\\n  }\\n\\n  @media (max-width: 900px) {\\n    grid-template-columns: 50% 50%;\\n  }\\n\\n  &[data-embed] {\\n    grid-template-rows: 0 auto;\\n\\n    > \", \" {\\n      display: none;\\n    }\\n  }\\n\"], [\"\\n  --color-app-background: #fff;\\n  --color-border: #c9c9c9;\\n  --color-primary: rgba(87, 176, 234, 1);\\n  --color-primary-faded: rgba(87, 176, 234, 0.5);\\n  --color-primary-shadow: rgba(87, 176, 234, 0.1);\\n  --color-link: rgba(87, 176, 234, 1);\\n  --color-disabled: #b3b3b3;\\n  --color-edge: #c9c9c9;\\n  --color-edge-active: var(--color-primary);\\n  --color-secondary: rgba(255, 152, 0, 1);\\n  --color-secondary-light: rgba(255, 152, 0, 0.5);\\n  --color-sidebar: #272722;\\n  --color-gray: #555;\\n  --color-failure: #ee7170;\\n  --color-success: #31ae00;\\n  --radius: 0.2rem;\\n  --border-width: 2px;\\n  --sidebar-width: 25rem;\\n  --shadow: 0 0.5rem 1rem var(--shadow-color, rgba(0, 0, 0, 0.2));\\n  --duration: 0.2s;\\n  --easing: cubic-bezier(0.5, 0, 0.5, 1);\\n\\n  height: 100%;\\n  display: grid;\\n  grid-template-areas:\\n    'header sidebar'\\n    'content content';\\n  grid-template-rows: 3rem auto;\\n  grid-template-columns: auto var(--sidebar-width);\\n  overflow: hidden;\\n\\n  > \", \" {\\n    display: inline-block;\\n    grid-row: 2;\\n    grid-column: -1;\\n  }\\n\\n  @media (max-width: 900px) {\\n    grid-template-columns: 50% 50%;\\n  }\\n\\n  &[data-embed] {\\n    grid-template-rows: 0 auto;\\n\\n    > \", \" {\\n      display: none;\\n    }\\n  }\\n\"])), StyledLayoutButton, StyledHeader);\nexport var StyledLogo = styled(Logo)(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  height: 2rem;\\n\"], [\"\\n  height: 2rem;\\n\"])));\nexport var StyledLink = styled.a(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  text-decoration: none;\\n  color: #57b0ea;\\n  text-transform: uppercase;\\n  display: block;\\n  font-size: 75%;\\n  font-weight: bold;\\n  margin: 0 0.25rem;\\n\"], [\"\\n  text-decoration: none;\\n  color: #57b0ea;\\n  text-transform: uppercase;\\n  display: block;\\n  font-size: 75%;\\n  font-weight: bold;\\n  margin: 0 0.25rem;\\n\"])));\nexport var StyledLinks = styled.nav(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n\\n  > \", \" {\\n    line-height: 2rem;\\n    margin-left: 1rem;\\n  }\\n\\n  &,\\n  &:visited {\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n\\n  > \", \" {\\n    line-height: 2rem;\\n    margin-left: 1rem;\\n  }\\n\\n  &,\\n  &:visited {\\n  }\\n\"])), StyledLink);\nvar invokeSaveGist = function (ctx, e) {\n    return fetch(\"https://api.github.com/gists/\" + ctx.gist.id, {\n        method: 'post',\n        body: JSON.stringify({\n            description: 'Generated by XState Viz: https://xstate.js.org/viz',\n            public: true,\n            files: {\n                'machine.js': { content: e.code }\n            }\n        }),\n        headers: {\n            Authorization: \"token \" + ctx.token\n        }\n    }).then(function (response) { return __awaiter(void 0, void 0, void 0, function () {\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!!response.ok) return [3 /*break*/, 2];\n                    _a = Error.bind;\n                    return [4 /*yield*/, response.json()];\n                case 1: throw new (_a.apply(Error, [void 0, (_b.sent()).message]))();\n                case 2: return [2 /*return*/, response.json()];\n            }\n        });\n    }); });\n};\nvar invokePostGist = function (ctx, e) {\n    return fetch(\"https://api.github.com/gists\", {\n        method: 'post',\n        body: JSON.stringify({\n            description: 'Generated by XState Viz: https://xstate.js.org/viz',\n            public: true,\n            files: {\n                'machine.js': { content: e.code }\n            }\n        }),\n        headers: {\n            Authorization: \"token \" + ctx.token\n        }\n    }).then(function (response) {\n        if (!response.ok) {\n            throw new Error('Unable to post gist');\n        }\n        return response.json();\n    });\n};\nfunction parseGist(gistQuery) {\n    var gistMatch = gistQuery.match(/([a-zA-Z0-9]{32})/);\n    return !gistMatch ? null : gistMatch[0];\n}\nvar invokeFetchGist = function (ctx) {\n    var gist = parseGist(ctx.query.gist);\n    if (!gist) {\n        return Promise.reject('Invalid gist ID.');\n    }\n    return fetch(\"https://api.github.com/gists/\" + gist, {\n        headers: {\n            Accept: 'application/json'\n        }\n    }).then(function (data) { return __awaiter(void 0, void 0, void 0, function () {\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!!data.ok) return [3 /*break*/, 2];\n                    _a = Error.bind;\n                    return [4 /*yield*/, data.json()];\n                case 1: throw new (_a.apply(Error, [void 0, (_b.sent()).message]))();\n                case 2: return [2 /*return*/, data.json()];\n            }\n        });\n    }); });\n};\nvar getUser = function (ctx) {\n    return fetch(\"https://api.github.com/user\", {\n        headers: {\n            Authorization: \"token \" + ctx.token\n        }\n    }).then(function (response) {\n        if (!response.ok) {\n            throw new Error('Unable to get user');\n        }\n        return response.json();\n    });\n};\nfunction createAuthActor() {\n    var listener = null;\n    var code = null;\n    return {\n        send: function (_code) {\n            code = _code;\n            if (listener) {\n                listener(_code);\n            }\n        },\n        listen: function (l) {\n            listener = l;\n            if (code) {\n                listener(code);\n            }\n        }\n    };\n}\nfunction updateQuery(query) {\n    if (!window.history)\n        return;\n    var fullQuery = __assign(__assign({}, queryString.parse(window.location.search)), query);\n    window.history.replaceState(null, '', \"?\" + queryString.stringify(fullQuery));\n}\nwindow.updateQuery = updateQuery;\nvar authActor = createAuthActor();\nwindow.authCallback = function (code) {\n    authActor.send(code);\n};\nvar query = queryString.parse(window.location.search);\nvar appMachine = Machine({\n    id: 'app',\n    context: {\n        query: query,\n        token: undefined,\n        // token: process.env.REACT_APP_TEST_TOKEN,\n        gist: undefined,\n        machine: examples.basic,\n        user: undefined\n    },\n    invoke: [\n        {\n            id: 'test',\n            src: function () { return function (cb) {\n                authActor.listen(function (code) {\n                    cb({ type: 'CODE', code: code });\n                });\n            }; }\n        }\n    ],\n    type: 'parallel',\n    states: {\n        auth: {\n            initial: 'checkingCode',\n            states: {\n                checkingCode: {\n                    on: {\n                        '': [\n                            {\n                                target: 'authorizing',\n                                cond: function (ctx) {\n                                    return !!ctx.query.code;\n                                }\n                            },\n                            {\n                                target: 'gettingUser',\n                                cond: function (ctx) {\n                                    return !!ctx.token;\n                                }\n                            },\n                            {\n                                target: 'unauthorized',\n                                actions: assign({\n                                    machine: examples.basic\n                                })\n                            }\n                        ]\n                    }\n                },\n                authorizing: {\n                    invoke: {\n                        src: function (ctx, e) {\n                            return fetch(\"https://xstate-gist.azurewebsites.net/api/GistPost?code=\" + e.code + \"&redirect_uri=\" + encodeURI(window.location.href))\n                                .then(function (response) {\n                                if (!response.ok) {\n                                    throw new Error('unauthorized');\n                                }\n                                return response.json();\n                            })\n                                .then(function (data) {\n                                if (data.error) {\n                                    throw new Error('expired code');\n                                }\n                                return data;\n                            });\n                        },\n                        onDone: {\n                            target: 'gettingUser',\n                            actions: assign({\n                                token: function (ctx, e) { return e.data.access_token; }\n                            })\n                        },\n                        onError: {\n                            target: 'unauthorized',\n                            actions: function (_, e) { return alert(e.data); }\n                        }\n                    }\n                },\n                gettingUser: {\n                    invoke: {\n                        src: getUser,\n                        onDone: {\n                            target: 'authorized',\n                            actions: assign({\n                                // @ts-ignore\n                                user: function (_, e) { return e.data; }\n                            })\n                        },\n                        onError: {\n                            target: 'unauthorized',\n                            actions: function (_, e) {\n                                console.error(e);\n                                notificationsActor.notify({\n                                    message: 'Authorization failed',\n                                    description: e.data.message,\n                                    severity: 'error'\n                                });\n                            }\n                        }\n                    }\n                },\n                authorized: {\n                    type: 'parallel',\n                    states: {\n                        user: {},\n                        gist: {\n                            initial: 'idle',\n                            states: {\n                                idle: {\n                                    initial: 'default',\n                                    states: {\n                                        default: {},\n                                        patched: {\n                                            after: {\n                                                1000: 'default'\n                                            }\n                                        },\n                                        posted: {\n                                            after: {\n                                                1000: 'default'\n                                            }\n                                        }\n                                    }\n                                },\n                                patching: {\n                                    invoke: {\n                                        src: invokeSaveGist,\n                                        onDone: {\n                                            target: 'idle.patched',\n                                            actions: [\n                                                function (ctx) {\n                                                    return notificationsActor.notify({\n                                                        message: 'Saved!',\n                                                        description: 'Copy and paste the URL to share the visualization.',\n                                                        severity: 'success'\n                                                    });\n                                                }\n                                            ]\n                                        },\n                                        onError: {\n                                            target: 'idle',\n                                            actions: function (ctx, e) {\n                                                console.error(e);\n                                                notificationsActor.notify({\n                                                    message: 'Failed to save machine',\n                                                    severity: 'error',\n                                                    description: e.data.message\n                                                });\n                                            }\n                                        }\n                                    }\n                                },\n                                posting: {\n                                    invoke: {\n                                        src: invokePostGist,\n                                        onDone: {\n                                            target: 'idle.posted',\n                                            actions: [\n                                                assign({\n                                                    gist: function (_, e) { return e.data; }\n                                                }),\n                                                function () {\n                                                    return notificationsActor.notify({\n                                                        message: 'Visualization uploaded!',\n                                                        description: 'Copy and paste the URL to share the visualization.',\n                                                        severity: 'success'\n                                                    });\n                                                },\n                                                function (_a) {\n                                                    var gist = _a.gist;\n                                                    return updateQuery({ gist: gist.id });\n                                                }\n                                            ]\n                                        }\n                                    }\n                                }\n                            },\n                            on: {\n                                'GIST.SAVE': [\n                                    {\n                                        target: '.idle',\n                                        cond: function (ctx, e) {\n                                            try {\n                                                toMachine(e.code);\n                                            }\n                                            catch (e) {\n                                                console.error(e);\n                                                notificationsActor.notify({\n                                                    message: 'Failed to upload machine',\n                                                    severity: 'error',\n                                                    description: e.message\n                                                });\n                                                return true;\n                                            }\n                                            return false;\n                                        }\n                                    },\n                                    {\n                                        target: '.patching',\n                                        cond: function (ctx) {\n                                            return (!!ctx.gist && ctx.gist.owner.login === ctx.user.login);\n                                        }\n                                    },\n                                    { target: '.posting' }\n                                ]\n                            }\n                        }\n                    },\n                    on: {\n                        LOGOUT: {\n                            target: 'unauthorized',\n                            actions: assign({\n                                token: undefined,\n                                user: undefined\n                            })\n                        }\n                    }\n                },\n                unauthorized: {\n                    on: {\n                        LOGIN: 'pendingAuthorization',\n                        'GIST.SAVE': 'pendingAuthorization'\n                    }\n                },\n                pendingAuthorization: {\n                    entry: function () {\n                        window.open('https://github.com/login/oauth/authorize?client_id=39c1ec91c4ed507f6e4c&scope=gist', 'Login with GitHub', 'width=800,height=600');\n                    },\n                    on: {\n                        CODE: 'authorizing',\n                        'AUTH.CANCEL': 'unauthorized'\n                    },\n                    after: {\n                        AUTH_TIMEOUT: {\n                            target: 'unauthorized',\n                            actions: function () {\n                                notificationsActor.notify({\n                                    message: 'Authorization timed out',\n                                    severity: 'error'\n                                });\n                            }\n                        }\n                    }\n                }\n            },\n            on: {\n                LOGIN: '.pendingAuthorization'\n            }\n        },\n        gist: {\n            initial: 'checking',\n            states: {\n                checking: {\n                    on: {\n                        '': [\n                            { target: 'fetching', cond: function (ctx) { return !!ctx.query.gist; } },\n                            { target: 'idle' }\n                        ]\n                    }\n                },\n                idle: {},\n                fetching: {\n                    invoke: {\n                        src: invokeFetchGist,\n                        onDone: {\n                            target: 'loaded',\n                            actions: assign({\n                                gist: function (_, e) { return e.data; },\n                                // @ts-ignore\n                                machine: function (_, e) {\n                                    return e.data.files['machine.js'].content;\n                                }\n                            })\n                        },\n                        onError: {\n                            target: 'idle',\n                            actions: [\n                                assign({\n                                    gist: undefined\n                                }),\n                                function (ctx, e) {\n                                    notificationsActor.notify({\n                                        message: \"Gist not found\",\n                                        description: \"\" + e.data,\n                                        severity: 'error'\n                                    });\n                                }\n                            ]\n                        }\n                    }\n                },\n                loaded: {\n                    entry: function (ctx, e) { return notificationsActor.notify('Gist loaded!'); }\n                }\n            }\n        }\n    }\n}, {\n    delays: {\n        AUTH_TIMEOUT: 15000\n    }\n});\nexport var AppContext = createContext({ state: appMachine.initialState, send: function () { }, service: {} });\nfunction layoutReducer(state, event) {\n    switch (state) {\n        case 'full':\n            switch (event) {\n                case 'TOGGLE':\n                    return 'viz';\n                default:\n                    return state;\n            }\n        case 'viz':\n            switch (event) {\n                case 'TOGGLE':\n                    return 'full';\n                default:\n                    return state;\n            }\n        default:\n            return state;\n    }\n}\nexport function App() {\n    var _a = useMachine(appMachine), current = _a[0], send = _a[1], service = _a[2];\n    var _b = useReducer(layoutReducer, query.layout || (!!query.embed ? 'viz' : 'full')), layout = _b[0], dispatchLayout = _b[1];\n    return (React.createElement(StyledApp, { \"data-layout\": layout, \"data-embed\": query.embed },\n        React.createElement(Notifications, { notifier: notificationsActor }),\n        React.createElement(AppContext.Provider, { value: { state: current, send: send, service: service } }, current.matches({ gist: 'fetching' }) ? (React.createElement(Loader, null)) : (React.createElement(React.Fragment, null,\n            React.createElement(StateChart, { machine: current.context.machine, onSave: function (code) {\n                    send('GIST.SAVE', { code: code });\n                } }),\n            React.createElement(LayoutButton, { onClick: function () { return dispatchLayout('TOGGLE'); } }, { full: 'Hide', viz: 'Code' }[layout] || 'Show'))))));\n}\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\n","import React from 'react';\nexport var Logo = function (_a) {\n    var className = _a.className;\n    return (React.createElement(\"svg\", { version: \"1.1\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", x: \"0px\", y: \"0px\", viewBox: \"0 0 279.8 98.5\", xmlSpace: \"preserve\", className: className },\n        React.createElement(\"g\", null,\n            React.createElement(\"g\", null,\n                React.createElement(\"path\", { d: \"M55.8,10.4L55.8,10.4h19.5L55.6,44.6l0,0C49.6,33.9,49.7,20.9,55.8,10.4z\", fill: \"var(--fill, black)\" }),\n                React.createElement(\"polygon\", { points: \"75.4,88.1 30.5,10.4 11,10.4 33.4,49.3 11,88.1 30.5,88.1 43.2,66.2 55.8,88.1\", fill: \"var(--fill, black)\" })),\n            React.createElement(\"g\", { className: \"st0\" },\n                React.createElement(\"path\", { d: \"M89.1,59.8c3.2,2.7,6.9,4,11.3,4.1c5.2-0.1,7.8-2,7.9-5.7c0-3.1-1.7-4.9-5.2-5.5c-1.6-0.2-3.4-0.5-5.3-0.8\\n\\t\\t\\tc-3.4-0.6-6-1.9-7.8-3.9c-1.8-2.1-2.8-4.6-2.8-7.6c0-3.6,1.2-6.5,3.5-8.7c2.2-2.2,5.4-3.3,9.5-3.3c4.9,0.1,9.2,1.5,12.9,4.2\\n\\t\\t\\tl-3.4,5.1c-3-2-6.3-3.1-9.8-3.2c-1.9,0-3.4,0.5-4.6,1.4c-1.3,1-2,2.5-2,4.4c0,1.2,0.4,2.3,1.3,3.2c0.9,1,2.3,1.7,4.3,2\\n\\t\\t\\tc1.1,0.2,2.6,0.4,4.5,0.6c3.7,0.5,6.5,1.9,8.3,4.1c1.8,2.2,2.6,4.7,2.6,7.7C114,66,109.4,69.9,100.3,70c-5.9,0-10.9-1.9-15.2-5.6\\n\\t\\t\\tL89.1,59.8z\", fill: \"var(--fill, black)\" }),\n                React.createElement(\"path\", { d: \"M135.5,34.2h-10.9v-5.5h27.8v5.5h-10.9v35.5h-6V34.2z\", fill: \"var(--fill, black)\" }),\n                React.createElement(\"path\", { d: \"M180.9,60.5h-15.1l-3.1,9.2h-6.4l14.4-41h5l14.4,41H184L180.9,60.5z M179.2,55l-5.7-17.9h-0.1L167.6,55H179.2z\", fill: \"var(--fill, black)\" }),\n                React.createElement(\"path\", { d: \"M205.4,34.2h-10.9v-5.5h27.8v5.5h-10.9v35.5h-6V34.2z\", fill: \"var(--fill, black)\" }),\n                React.createElement(\"path\", { d: \"M234.2,28.7h25.4v5.8h-19.4v11.7h16.5v5.5h-16.5v12.1h19.4v5.8h-25.4V28.7z\", fill: \"var(--fill, black)\" })))));\n};\n","import React from 'react';\nimport { notificationsMachine } from './Notifications';\nimport { StyledHeader, StyledLogo, StyledLinks, StyledLink } from './App';\nimport { interpret } from 'xstate';\nvar notificationsService = interpret(notificationsMachine).start();\nexport var notificationsActor = {\n    toJSON: function () { return ({ id: 'notifications' }); },\n    id: 'notifications',\n    send: notificationsService.send.bind(notificationsService),\n    subscribe: notificationsService.subscribe.bind(notificationsService),\n    notify: function (message) {\n        return notificationsService.send({\n            type: 'NOTIFICATIONS.QUEUE',\n            data: typeof message === 'string' ? { message: message, severity: 'info' } : message\n        });\n    }\n};\nexport function Header() {\n    return (React.createElement(StyledHeader, null,\n        React.createElement(StyledLogo, null),\n        React.createElement(StyledLinks, null,\n            React.createElement(StyledLink, { href: \"https://github.com/davidkpiano/xstate\", target: \"_xstate-github\" }, \"GitHub\"),\n            React.createElement(StyledLink, { href: \"https://xstate.js.org/docs\", target: \"_xstate-docs\" }, \"Docs\"),\n            React.createElement(StyledLink, { href: \"https://spectrum.chat/statecharts\", target: \"_statecharts-community\" }, \"Community\"),\n            React.createElement(StyledLink, { href: \"https://opencollective.com/xstate\", target: \"_sponsor\" }, \"Sponsor \\uD83D\\uDC99\"))));\n}\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport { Machine, assign } from 'xstate';\nimport AceEditor from 'react-ace';\nimport { isBuiltInEvent } from './utils';\nimport styled from 'styled-components';\nimport { useMachine } from '@xstate/react';\nimport { StyledButton } from './Button';\nimport { format } from 'date-fns';\nimport { notificationsActor } from './Header';\nfunction getNextEvents(state) {\n    var nextEvents = state.nextEvents;\n    return nextEvents.filter(function (eventType) {\n        return !isBuiltInEvent(eventType);\n    });\n}\nvar StyledEventPanelEvents = styled.ul(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  list-style: none;\\n  padding: 0;\\n  overflow-y: scroll;\\n\"], [\"\\n  list-style: none;\\n  padding: 0;\\n  overflow-y: scroll;\\n\"])));\nvar StyledEventPanelEvent = styled.li(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  border-bottom: 1px solid #444;\\n\\n  > pre {\\n    margin: 0;\\n    flex-grow: 1;\\n  }\\n\\n  &[data-builtin] {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\\n  details {\\n    width: 100%;\\n  }\\n\\n  summary {\\n    width: 100%;\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-start;\\n    align-items: center;\\n    height: 2rem;\\n    padding: 0 0.5rem;\\n\\n    > :first-child {\\n      margin-right: auto;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      white-space: nowrap;\\n    }\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  border-bottom: 1px solid #444;\\n\\n  > pre {\\n    margin: 0;\\n    flex-grow: 1;\\n  }\\n\\n  &[data-builtin] {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\\n  details {\\n    width: 100%;\\n  }\\n\\n  summary {\\n    width: 100%;\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-start;\\n    align-items: center;\\n    height: 2rem;\\n    padding: 0 0.5rem;\\n\\n    > :first-child {\\n      margin-right: auto;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      white-space: nowrap;\\n    }\\n  }\\n\"])));\nvar StyledEventPanel = styled.section(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-rows: 1fr 10rem;\\n  grid-template-areas: 'events' 'editor';\\n  overflow: hidden;\\n\"], [\"\\n  display: grid;\\n  grid-template-rows: 1fr 10rem;\\n  grid-template-areas: 'events' 'editor';\\n  overflow: hidden;\\n\"])));\nvar StyledEventPanelButtons = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  margin-bottom: 0.5rem;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-content: flex-start;\\n  flex-wrap: wrap;\\n  overflow-y: auto;\\n\"], [\"\\n  margin-bottom: 0.5rem;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-content: flex-start;\\n  flex-wrap: wrap;\\n  overflow-y: auto;\\n\"])));\nvar StyledEventPanelButton = styled.button(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  appearance: none;\\n  margin-right: 0.5rem;\\n  margin-bottom: 0.5rem;\\n  background-color: var(--color-primary);\\n  border: none;\\n  color: white;\\n  padding: 0.25rem 0.5rem;\\n  border-radius: 2rem;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n\"], [\"\\n  appearance: none;\\n  margin-right: 0.5rem;\\n  margin-bottom: 0.5rem;\\n  background-color: var(--color-primary);\\n  border: none;\\n  color: white;\\n  padding: 0.25rem 0.5rem;\\n  border-radius: 2rem;\\n  font-size: 0.75em;\\n  font-weight: bold;\\n\"])));\nvar StyledEventPanelEditor = styled.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-columns: 60% 40%;\\n  grid-template-rows: 1fr auto;\\n  grid-template-areas: 'code events' 'code send';\\n  padding: 1rem;\\n  border-top: 2px solid #444;\\n\\n  > \", \" {\\n    grid-area: send;\\n  }\\n\\n  > \", \" {\\n    grid-area events;\\n  }\\n\"], [\"\\n  display: grid;\\n  grid-template-columns: 60% 40%;\\n  grid-template-rows: 1fr auto;\\n  grid-template-areas: 'code events' 'code send';\\n  padding: 1rem;\\n  border-top: 2px solid #444;\\n\\n  > \", \" {\\n    grid-area: send;\\n  }\\n\\n  > \", \" {\\n    grid-area events;\\n  }\\n\"])), StyledButton, StyledEventPanelButtons);\nvar StyledTime = styled.time(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  color: #777;\\n  margin-left: 0.5rem;\\n\"], [\"\\n  color: #777;\\n  margin-left: 0.5rem;\\n\"])));\nvar sendEventContext = {\n    eventCode: JSON.stringify({ type: '' }, null, 2)\n};\nvar sendEventMachine = Machine({\n    id: 'sendEvent',\n    initial: 'idle',\n    context: sendEventContext,\n    states: {\n        idle: {\n            on: {\n                UPDATE: {\n                    actions: assign({\n                        eventCode: function (_, e) { return e.value; }\n                    })\n                },\n                AUTOFILL: {\n                    actions: [\n                        assign({\n                            eventCode: function (_, e) { return e.value; }\n                        }),\n                        'moveCursor'\n                    ]\n                },\n                SEND: {\n                    actions: 'sendToService'\n                }\n            }\n        }\n    }\n});\nexport var EventPanel = function (_a) {\n    var records = _a.records, state = _a.state, service = _a.service;\n    var _b = useMachine(sendEventMachine, {\n        execute: false\n    }), current = _b[0], send = _b[1], sendEventService = _b[2];\n    var editorRef = useRef(null);\n    var eventsRef = useRef(null);\n    useEffect(function () {\n        sendEventService.execute(current, {\n            moveCursor: function () {\n                if (editorRef.current) {\n                    editorRef.current.moveCursorTo(1);\n                    editorRef.current.navigateLineEnd();\n                    editorRef.current.focus();\n                }\n            }\n        });\n    }, [current, service]);\n    useEffect(function () {\n        if (eventsRef.current) {\n            eventsRef.current.scrollTop = eventsRef.current.scrollHeight;\n        }\n    }, [eventsRef.current, records.length]);\n    var sendToService = useCallback(function (eventOrJSON) {\n        var event = eventOrJSON;\n        if (typeof eventOrJSON === 'string') {\n            try {\n                event = JSON.parse(eventOrJSON);\n            }\n            catch (e) {\n                notificationsActor.notify({\n                    message: 'Failed to send event',\n                    description: e.message,\n                    severity: 'error'\n                });\n                return;\n            }\n        }\n        if (!isBuiltInEvent(event.type)) {\n            service.send(event);\n        }\n    }, [service]);\n    return (React.createElement(StyledEventPanel, null,\n        React.createElement(StyledEventPanelEvents, { ref: eventsRef }, records.map(function (_a, i) {\n            var event = _a.event, time = _a.time;\n            var pastEventCode = JSON.stringify(event, null, 2);\n            var isBuiltIn = isBuiltInEvent(event.type);\n            return (React.createElement(StyledEventPanelEvent, { key: i, title: \"Double-click to send, click to edit\", \"data-builtin\": isBuiltIn || undefined },\n                React.createElement(\"details\", null,\n                    React.createElement(\"summary\", null,\n                        isBuiltIn ? (React.createElement(\"em\", null, event.type)) : (React.createElement(React.Fragment, null,\n                            React.createElement(\"strong\", { title: event.type }, event.type),\n                            React.createElement(StyledButton, { \"data-variant\": \"link\", onClick: function () {\n                                    sendToService(event);\n                                } }, \"Replay\"),\n                            React.createElement(StyledButton, { \"data-variant\": \"link\", onClick: function (e) {\n                                    e.stopPropagation();\n                                    send('AUTOFILL', { value: pastEventCode });\n                                } }, \"Edit\"))),\n                        React.createElement(StyledTime, null, format(time, 'hh:mm:ss.SS'))),\n                    React.createElement(\"pre\", null, isBuiltIn ? event.type : JSON.stringify(event, null, 2)))));\n        })),\n        React.createElement(StyledEventPanelEditor, null,\n            React.createElement(StyledEventPanelButtons, null, getNextEvents(state).map(function (nextEvent) {\n                return (React.createElement(StyledEventPanelButton, { key: nextEvent, onClick: function (e) {\n                        e.stopPropagation();\n                        send('AUTOFILL', {\n                            value: JSON.stringify({\n                                type: nextEvent\n                            }, null, 2)\n                        });\n                    } }, nextEvent));\n            })),\n            React.createElement(AceEditor, { ref: function (r) {\n                    if (!r) {\n                        return;\n                    }\n                    editorRef.current = r.editor;\n                }, mode: \"javascript\", theme: \"monokai\", editorProps: { $blockScrolling: true }, value: current.context.eventCode, onChange: function (value) {\n                    send('UPDATE', { value: value });\n                }, setOptions: { tabSize: 2, fontSize: '12px' }, width: \"100%\", height: '5em', showGutter: false, readOnly: false, cursorStart: 3 }),\n            React.createElement(StyledButton, { \"data-variant\": \"primary\", \"data-size\": \"full\", onClick: function () { return sendToService(current.context.eventCode); } }, \"Send\"))));\n};\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport React, { useState, useContext } from 'react';\nimport AceEditor from 'react-ace';\nimport 'brace/theme/monokai';\nimport 'brace/mode/javascript';\nimport styled from 'styled-components';\nimport { AppContext } from './App';\nimport _ from 'lodash';\nexport var StyledEditor = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  height: 100%;\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 1rem;\\n\"], [\"\\n  height: 100%;\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 1rem;\\n\"])));\nexport var StyledButtons = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  grid-column-gap: 1rem;\\n\"], [\"\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  grid-column-gap: 1rem;\\n\"])));\nexport var Editor = function (props) {\n    var _a = useState(props.code), code = _a[0], setCode = _a[1];\n    var state = useContext(AppContext).state;\n    var onChange = props.onChange, onSave = props.onSave, _b = props.height, height = _b === void 0 ? '100%' : _b, _c = props.changeText, changeText = _c === void 0 ? 'Update' : _c, _d = props.mode, mode = _d === void 0 ? 'javascript' : _d;\n    var isSaving = state.matches({\n        auth: { authorized: { gist: 'patching' } }\n    }) ||\n        state.matches({\n            auth: { authorized: { gist: 'posting' } }\n        });\n    return (React.createElement(StyledEditor, null,\n        React.createElement(AceEditor, { mode: mode, theme: \"monokai\", editorProps: { $blockScrolling: true }, value: code, onChange: function (value) { setCode(value); _.debounce(onChange, 1000)(code); }, setOptions: { tabSize: 2, fontSize: '12px' }, width: \"100%\", height: height, showGutter: false, readOnly: !onChange, wrapEnabled: true })));\n};\nvar templateObject_1, templateObject_2;\n","import React from 'react';\nimport { Editor } from './Editor';\nexport var CodePanel = function (_a) {\n    var code = _a.code, onChange = _a.onChange, onSave = _a.onSave;\n    return React.createElement(Editor, { code: code, onChange: onChange, onSave: onSave });\n};\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useState, useEffect, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { Machine, assign, send, spawn, interpret } from 'xstate';\nimport * as XState from 'xstate';\nimport { StateChartContainer, StyledStateChartContainer } from './VizTabs';\nimport { StatePanel } from './StatePanel';\nimport { EventPanel } from './EventPanel';\nimport { CodePanel } from './CodePanel';\nimport { raise } from 'xstate/lib/actions';\nimport { getEdges } from 'xstate/lib/graph';\nimport { notificationsActor } from './Header';\nimport { useService } from '@xstate/react';\nvar StyledViewTab = styled.li(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  padding: 0 1rem;\\n  border-bottom: 2px solid transparent;\\n  list-style: none;\\n  text-transform: uppercase;\\n  user-select: none;\\n  cursor: pointer;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\\n  &:not([data-active]):hover {\\n    border-color: var(--color-secondary-light);\\n  }\\n\\n  &[data-active] {\\n    border-color: var(--color-secondary);\\n  }\\n\"], [\"\\n  padding: 0 1rem;\\n  border-bottom: 2px solid transparent;\\n  list-style: none;\\n  text-transform: uppercase;\\n  user-select: none;\\n  cursor: pointer;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\\n  &:not([data-active]):hover {\\n    border-color: var(--color-secondary-light);\\n  }\\n\\n  &[data-active] {\\n    border-color: var(--color-secondary);\\n  }\\n\"])));\nvar StyledViewTabs = styled.ul(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n  margin: 0;\\n  padding: 0;\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  position: sticky;\\n  top: 0;\\n\"], [\"\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: stretch;\\n  margin: 0;\\n  padding: 0;\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  position: sticky;\\n  top: 0;\\n\"])));\nvar StyledSidebar = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background-color: var(--color-sidebar);\\n  color: white;\\n  overflow: hidden;\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  grid-template-rows: 2rem 1fr;\\n  border-top-left-radius: 1rem;\\n  box-shadow: var(--shadow);\\n  transition: transform 0.6s cubic-bezier(0.5, 0, 0.5, 1);\\n  z-index: 1;\\n\"], [\"\\n  background-color: var(--color-sidebar);\\n  color: white;\\n  overflow: hidden;\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  grid-template-rows: 2rem 1fr;\\n  border-top-left-radius: 1rem;\\n  box-shadow: var(--shadow);\\n  transition: transform 0.6s cubic-bezier(0.5, 0, 0.5, 1);\\n  z-index: 1;\\n\"])));\nexport var StyledStateChart = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  grid-area: content;\\n  display: grid;\\n  grid-template-columns: 1fr var(--sidebar-width, 25rem);\\n  grid-template-rows: 1fr;\\n  grid-template-areas: 'content sidebar';\\n  font-family: sans-serif;\\n  font-size: 12px;\\n  overflow: hidden;\\n  max-height: inherit;\\n\\n  @media (max-width: 900px) {\\n    grid-template-columns: 1fr 1fr;\\n  }\\n\\n  > \", \" {\\n    grid-area: sidebar;\\n  }\\n\\n  > \", \" {\\n    grid-area: content;\\n  }\\n\\n  > * {\\n    max-height: inherit;\\n    overflow-y: auto;\\n  }\\n\\n  [data-layout='viz'] & {\\n    > :not(\", \") {\\n      grid-column: 1 / -1;\\n    }\\n\\n    > \", \" {\\n      transform: translateX(100%);\\n    }\\n  }\\n\"], [\"\\n  grid-area: content;\\n  display: grid;\\n  grid-template-columns: 1fr var(--sidebar-width, 25rem);\\n  grid-template-rows: 1fr;\\n  grid-template-areas: 'content sidebar';\\n  font-family: sans-serif;\\n  font-size: 12px;\\n  overflow: hidden;\\n  max-height: inherit;\\n\\n  @media (max-width: 900px) {\\n    grid-template-columns: 1fr 1fr;\\n  }\\n\\n  > \", \" {\\n    grid-area: sidebar;\\n  }\\n\\n  > \", \" {\\n    grid-area: content;\\n  }\\n\\n  > * {\\n    max-height: inherit;\\n    overflow-y: auto;\\n  }\\n\\n  [data-layout='viz'] & {\\n    > :not(\", \") {\\n      grid-column: 1 / -1;\\n    }\\n\\n    > \", \" {\\n      transform: translateX(100%);\\n    }\\n  }\\n\"])), StyledSidebar, StyledStateChartContainer, StyledSidebar, StyledSidebar);\nexport function toMachine(machine) {\n    if (typeof machine !== 'string') {\n        return machine;\n    }\n    var createMachine;\n    try {\n        createMachine = new Function('Machine', 'interpret', 'assign', 'send', 'sendParent', 'spawn', 'raise', 'actions', 'XState', machine);\n    }\n    catch (e) {\n        throw e;\n    }\n    var machines = [];\n    var machineProxy = function (config, options) {\n        var machine = Machine(config, options);\n        machines.push(machine);\n        return machine;\n    };\n    try {\n        createMachine(machineProxy, interpret, assign, send, XState.sendParent, spawn, raise, XState.actions, XState);\n    }\n    catch (e) {\n        throw e;\n    }\n    return machines[machines.length - 1];\n}\nexport var StateChart = function (_a) {\n    var onSave = _a.onSave, className = _a.className, props = __rest(_a, [\"onSave\", \"className\"]);\n    var _b = useState(0), resetCount = _b[0], setResetCount = _b[1];\n    var _c = useState([]), events = _c[0], setEvents = _c[1];\n    var _d = useState(toMachine(props.machine)), machine = _d[0], setMachine = _d[1];\n    useEffect(function () {\n        setMachine(toMachine(props.machine));\n    }, [props.machine]);\n    var service = useMemo(function () {\n        return interpret(machine).start();\n    }, [machine, resetCount]);\n    var current = useService(service)[0];\n    useEffect(function () {\n        var formattedEvent = {\n            event: current.event,\n            time: Date.now()\n        };\n        setEvents(events.concat(formattedEvent));\n    }, [current]);\n    var _e = useState((function () {\n        var _machine = toMachine(props.machine);\n        return {\n            preview: undefined,\n            previewEvent: undefined,\n            view: 'definition',\n            machine: _machine,\n            code: typeof _machine === 'string'\n                ? _machine\n                : \"Machine(\" + JSON.stringify(_machine.config, null, 2) + \")\",\n            toggledStates: {},\n            events: []\n        };\n    })()), allState = _e[0], setState = _e[1];\n    function renderView(current, service) {\n        var view = allState.view, code = allState.code;\n        switch (view) {\n            case 'definition':\n                return (React.createElement(CodePanel, { code: code, onChange: function (code) { return updateMachine(code); }, onSave: onSave }));\n            case 'state':\n                return React.createElement(StatePanel, { state: current, service: service });\n            case 'events':\n                return (React.createElement(EventPanel, { state: current, service: service, records: events }));\n            default:\n                return null;\n        }\n    }\n    function updateMachine(code) {\n        var machine;\n        try {\n            machine = toMachine(code);\n            getEdges(machine);\n        }\n        catch (e) {\n            notificationsActor.notify({\n                message: 'Failed to update machine',\n                severity: 'error',\n                description: e.message\n            });\n            console.error(e);\n            return;\n        }\n        reset(code, machine);\n    }\n    function reset(code, machine) {\n        if (code === void 0) { code = allState.code; }\n        if (machine === void 0) { machine = allState.machine; }\n        setEvents([]);\n        setResetCount(resetCount + 1);\n        setMachine(machine);\n        setState(__assign(__assign({}, allState), { code: code }));\n    }\n    var code = allState.code;\n    return (React.createElement(StyledStateChart, { className: className, key: code, style: {\n            background: 'var(--color-app-background)'\n        } },\n        React.createElement(StateChartContainer, { service: service, onReset: function () { return reset(); } }),\n        React.createElement(StyledSidebar, null,\n            React.createElement(StyledViewTabs, null, ['definition', 'state', 'events'].map(function (view) {\n                return (React.createElement(StyledViewTab, { onClick: function () { return setState(__assign(__assign({}, allState), { view: view })); }, key: view, \"data-active\": allState.view === view || undefined }, view));\n            })),\n            renderView(current, service))));\n};\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;\n","import React, { Component, createContext, useState } from 'react';\nimport './App.css';\nimport { App } from '@statecharts/xstate-viz';\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport queryString from 'query-string';\n\nconst query = queryString.parse(window.location.search);\n\nif (query.code && window.opener) {\n  window.opener.authCallback(query.code);\n  setTimeout(() => window.close());\n} else {\n  ReactDOM.render(<App />, document.getElementById('root'));\n\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: http://bit.ly/CRA-PWA\n  serviceWorker.unregister();\n}\n"],"sourceRoot":""}